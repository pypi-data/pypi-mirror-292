import{C as J}from"./Container-b694a4b0.js";import{d as f,o as K,n as k,c as s,e as v,w as r,a1 as Q,u,X as A,g as n,f as d,i as g,t as p,a0 as x,F as V,h as D,M as b,j as C,W as Y,s as m,b as c,r as X,ai as ee,aj as te,Y as R,a4 as ae,a3 as w,_ as ie,z as se,N as re,ak as oe}from"./index-d8f72d9c.js";import{p as ne,k as le,l as O,M as ue,i as de,c as me}from"./VCheckbox-78132c43.js";import{P as ce}from"./PanelviewItemCompact-f59c8796.js";import{w as q,V as pe,s as _e,y as ye}from"./VListItem-99f39ae4.js";import{V as ve,T as we}from"./Toolbar-171f4c01.js";import{V as Z}from"./VToolbar-46cf4633.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{V as ge}from"./VCard-120d3152.js";/* empty css              */import"./eventbus-55fa23b1.js";import"./VCheckboxBtn-c3c8d14c.js";import"./VList-288ded64.js";import"./VCardText-361d19f4.js";import"./VMenu-c477cd50.js";const he=f({__name:"Carousel",setup(h){return K(()=>{document.documentElement.style.setProperty("--swiper-navigation-color","primary")}),(t,_)=>{const a=k("swiper");return s(),v(a,{"slides-per-view":u(ne)(t.$vuetify.display.width)+.5,"space-between":24,"free-mode":!0,navigation:!u(A)({breakpoint:"mobile"})},{default:r(()=>[Q(t.$slots,"default")]),_:3},8,["slides-per-view","navigation"])}}}),fe={key:0,class:"widget-row"},be={class:"mr-3"},ke={key:1,class:"mr-3"},Ce=f({__name:"HomeWidgetRow",props:{widgetRow:{}},setup(h){const t=function(e,i,o){const l=Array.isArray(e)?e:[e];le(l,void 0,i,o)},_=function(e,i,o){if(!O(e)){t(e,i,o);return}e.media_type==b.FOLDER?Y.push({name:"browse",query:{path:e.path}}):Y.push({name:e.media_type,params:{itemId:e.item_id,provider:e.provider}})},a=function(e,i,o){if(!O(e)){t(e,i,o);return}if(!m.activePlayerId){m.showPlayersMenu=!0;return}c.playMedia(e.uri,void 0)};return(e,i)=>{const o=k("swiper-slide");return e.widgetRow.items.length?(s(),n("div",fe,[d(Z,{class:"header",color:"transparent",style:x(e.widgetRow.path?"cursor: pointer; width: fit-content;":"width: fit-content;"),onClick:i[0]||(i[0]=l=>e.widgetRow.path?e.$router.push(e.widgetRow.path):"")},{prepend:r(()=>[d(q,{icon:e.widgetRow.icon},null,8,["icon"])]),title:r(()=>[e.widgetRow.count?(s(),v(ve,{key:0,inline:"",color:"grey",content:e.widgetRow.count},{default:r(()=>[g("span",be,p(e.$t(e.widgetRow.label)),1)]),_:1},8,["content"])):(s(),n("span",ke,p(e.$t(e.widgetRow.label)),1))]),_:1},8,["style"]),d(he,null,{default:r(()=>[(s(!0),n(V,null,D(e.widgetRow.items,l=>(s(),v(o,{key:l.uri},{default:r(()=>[d(ce,{item:l,"permanent-overlay":![u(b).ALBUM,u(b).TRACK,u(b).RADIO].includes(l.media_type),onMenu:t,onClick:_,onPlay:a},null,8,["item","permanent-overlay"])]),_:2},1024))),128))]),_:1})])):C("",!0)}}});const qe=P(Ce,[["__scopeId","data-v-00198094"]]),Pe=f({__name:"HomeWidgetRows",async setup(h){let t,_;const a=X({recently_played:{label:"recently_played",icon:"mdi-motion-play",items:[]},artists:{label:"artists",icon:"mdi-account-music",path:"/artists",items:[]},albums:{label:"albums",icon:"mdi-album",path:"/albums",items:[]},playlists:{label:"playlists",icon:"mdi-playlist-music",path:"/playlists",items:[]},tracks:{label:"tracks",icon:"mdi-file-music",path:"/tracks",items:[]},radios:{label:"radios",icon:"mdi-radio",path:"/radios",items:[]},browse:{label:"browse",icon:"mdi-folder",path:"/browse",items:[]}}),e=async function(){a.value.recently_played.items=await c.getRecentlyPlayedItems(10),a.value.artists.items=await c.getLibraryArtists(void 0,void 0,20,void 0,"random"),a.value.artists.count=m.libraryArtistsCount,a.value.albums.items=await c.getLibraryAlbums(void 0,void 0,20,void 0,"timestamp_added_desc"),a.value.albums.count=m.libraryAlbumsCount,a.value.playlists.items=await c.getLibraryPlaylists(void 0,void 0,20,void 0,"timestamp_added_desc"),a.value.playlists.count=m.libraryPlaylistsCount,a.value.radios.items=await c.getLibraryRadios(void 0,void 0,20,void 0,"timestamp_added_desc"),a.value.radios.count=m.libraryRadiosCount,a.value.tracks.items=await c.getLibraryTracks(void 0,void 0,20,void 0,"timestamp_added_desc"),a.value.tracks.count=m.libraryTracksCount};return[t,_]=ee(()=>e()),await t,_(),te(()=>{e()}),(i,o)=>(s(!0),n(V,null,D(a.value,l=>(s(),n("div",{key:l.label},[d(qe,{"widget-row":l},null,8,["widget-row"])]))),128))}}),Ie={class:"media-thumb player-media-thumb"},Re={style:{cursor:"pointer"}},Ae={key:0},Ve={key:0},De={key:1},Se={key:2},Me={style:{cursor:"pointer"},class:"line-clamp-1"},Le={key:0},Te={key:1},$e={key:2,class:"line-clamp-1"},Ge={key:3,class:"line-clamp-1"},Be={key:4,class:"line-clamp-1"},Ue={key:5,class:"line-clamp-1"},Ne=f({__name:"PanelviewPlayerCard",props:{queue:{}},setup(h){return(t,_)=>(s(),v(ge,{class:ie(["panel-item",{"panel-item-selected":u(m).activePlayerId==t.queue.queue_id,"panel-item-idle":t.queue.state==u(w).PAUSED}])},{default:r(()=>[d(pe,{class:"panel-item-details",flat:""},{prepend:r(()=>{var a;return[g("div",Ie,[d(ue,{size:"60",item:((a=t.queue.current_item)==null?void 0:a.media_item)||t.queue.current_item,fallback:u(de),style:{cursor:"pointer"}},null,8,["item","fallback"])])]}),title:r(()=>{var a,e,i,o,l,y;return[g("div",Re,[(a=t.queue.current_item)!=null&&a.media_item?(s(),n("div",Ae,[R(p((e=t.queue.current_item)==null?void 0:e.media_item.name)+" ",1),"version"in((i=t.queue.current_item)==null?void 0:i.media_item)&&((o=t.queue.current_item)!=null&&o.media_item.version)?(s(),n("span",Ve,"("+p((l=t.queue.current_item)==null?void 0:l.media_item.version)+")",1)):C("",!0)])):t.queue.current_item?(s(),n("div",De,p((y=t.queue.current_item)==null?void 0:y.name),1)):(s(),n("div",Se,p(t.queue.display_name),1))])]}),subtitle:r(()=>{var a,e,i,o,l,y,I,S,M,L,T,$,G,B,U,N,z,F,H,E,j;return[g("div",Me,[(a=t.queue.current_item)!=null&&a.media_item&&((i=(e=t.queue.current_item)==null?void 0:e.media_item)==null?void 0:i.media_type)==u(b).TRACK&&"album"in((o=t.queue.current_item)==null?void 0:o.media_item)&&((l=t.queue.current_item)!=null&&l.media_item.album)?(s(),n("div",Le,p(u(me)((y=t.queue.current_item)==null?void 0:y.media_item.artists))+" â€¢ "+p((I=t.queue.current_item)==null?void 0:I.media_item.album.name),1)):(S=t.queue.current_item)!=null&&S.media_item&&"artists"in((M=t.queue.current_item)==null?void 0:M.media_item)&&((L=t.queue.current_item)==null?void 0:L.media_item.artists.length)>0?(s(),n("div",Te,p((T=t.queue.current_item)==null?void 0:T.media_item.artists[0].name),1)):(G=($=t.queue.current_item)==null?void 0:$.streamdetails)!=null&&G.stream_title?(s(),n("div",$e,p((U=(B=t.queue.current_item)==null?void 0:B.streamdetails)==null?void 0:U.stream_title),1)):(z=(N=t.queue.current_item)==null?void 0:N.media_item)!=null&&z.metadata.description?(s(),n("div",Ge,p((F=t.queue.current_item)==null?void 0:F.media_item.metadata.description),1)):t.queue.items==0?(s(),n("div",Be,p(t.$t("queue_empty")),1)):((H=u(m).activePlayer)==null?void 0:H.active_source)!=((E=u(m).activePlayer)==null?void 0:E.player_id)?(s(),n("div",Ue,p(t.$t("external_source_active",[(j=u(m).activePlayer)==null?void 0:j.active_source])),1)):C("",!0)])]}),default:r(()=>[g("h6",null,p(t.queue.display_name),1)]),append:r(()=>[d(_e,{icon:"",variant:"text",onClick:_[0]||(_[0]=ae(a=>u(c).queueCommandPlayPause(t.queue.queue_id),["stop"]))},{default:r(()=>[t.queue.state==u(w).PLAYING?(s(),v(q,{key:0,size:u(A)({breakpoint:"phone"})?"24":"32"},{default:r(()=>[R("mdi-pause-circle-outline")]),_:1},8,["size"])):(s(),v(q,{key:1,size:u(A)({breakpoint:"phone"})?"24":"32"},{default:r(()=>[R("mdi-play-circle-outline")]),_:1},8,["size"]))]),_:1})]),_:1})]),_:1},8,["class"]))}});const ze=P(Ne,[["__scopeId","data-v-ca997964"]]),Fe={key:0,class:"widget-row"},He={class:"mr-3"},Ee=f({__name:"HomeCurrentlyPlayingRow",setup(h){const t={[w.PLAYING]:1,[w.PAUSED]:2,[w.IDLE]:2},_=se(()=>Object.values(c.queues).filter(e=>e.active&&e.items>0&&e.queue_id in c.players&&c.players[e.queue_id].powered&&[w.PLAYING,w.PAUSED].includes(c.players[e.queue_id].state)).sort((e,i)=>e.display_name.localeCompare(i.display_name)).sort((e,i)=>t[e.state]-t[i.state]));function a(e){e&&e.queue_id in c.players&&(m.activePlayerId==e.queue_id?m.showFullscreenPlayer=!0:m.activePlayerId=e.queue_id)}return(e,i)=>{const o=k("swiper-slide"),l=k("swiper");return _.value.length?(s(),n("div",Fe,[d(Z,{class:"header",color:"transparent",style:{width:"fit-content"}},{prepend:r(()=>[d(q,{icon:"mdi-play-circle-outline"})]),title:r(()=>[g("span",He,p(e.$t("currently_playing")),1)]),_:1}),d(l,null,{default:r(()=>[(s(!0),n(V,null,D(_.value,y=>(s(),v(o,{key:y.queue_id,style:{"max-width":"400px",width:"300px"}},{default:r(()=>[d(ze,{queue:y,onClick:I=>a(y)},null,8,["queue","onClick"])]),_:2},1024))),128))]),_:1})])):C("",!0)}}});const je=P(Ee,[["__scopeId","data-v-7d6eddfa"]]),W="https://deezer.oauth.jonathanbangert.com/http%3A%2F%2F192.168.1.4%3A8096%2Fcallback%2Fra4zYWuDsDu?code=AQDITszGGPJgyjGJpQKi5uxwzS4IlCg9PlclwaM9VlgXianotmp8bjXUPj88GCVNtw2dU0GBD1xTAcslWgfZ3MKrkpo04n0RRZlIOD9kq7c7TnTZYQO5D0Is_N7u6eCg_cpSbfTXHk_6jNgYeq0vo4JS9KdRKdEZ8RUDwIoFa7DrR9GZ3Tm8jFLCy-uMxkCPG43SCV2n-y2Ravha-ThKXL5BR2UjzkUoI3N6T1rhP7cXTAeqnHdFGw3y7JPJQGgn352CXx79MAF3znM3WatvDmYiHpNyoS5_dJ6Hy1uNeqVfmRDtZssKipj3HRRzFmTSm1x3YJ7a9Pobg22a4qmKADQ4Mj3aaEo87V1WbrdS-ZSibZtIQirRqSnUxkB-Oa_BueSQBoCGpvqcIUeuA3sJhbLXVqriDDcrpRokIN8gULOhtoNvAGLMgYME4DIhMY5A0WXlbp5ZLGUNlEBpaPzBrK-chucgIfqBrkyvHa1-OVLgUWvt8sG11X1XOoswydI_IRFXSZ9fxZgmTxCDTr6rE9GMAm6oF0GbjGI5VV1Vyh0OieppYpxJCTUGCsEV2VhY1lDufEigiUo_iVo8zYfxEygB099Bx0CxhHmNVEctotmU-_7yYkVQHG37h8jl7ZyAUI6MNJgenBVgrukJAyzbBfr-qxAFbwWgOA",Ye=f({__name:"HomeView",props:{player:{}},setup(h){const t=h,_=X(localStorage.getItem("frontend.settings.hide_settings")=="true");console.log(window.location.href),console.log("url_org",W);const a=decodeURIComponent(W.split("/",4)[3]);console.log("redirect_url",a);const e=new URLSearchParams(window.location.search);return console.log(e.toString()),re(()=>t.player,i=>{if(console.error("props.player",i),!(!i||i=="false")){if(typeof i=="string"){if(i in c.players)m.activePlayerId=c.players[i].player_id;else for(const o of Object.values(c.players))if(o.display_name.toLowerCase()===i.toLowerCase()){m.activePlayerId=o.player_id;break}}m.showFullscreenPlayer=!0}},{immediate:!0}),(i,o)=>(s(),n("div",null,[d(we,{title:"Music Assistant","show-loading":!0,"menu-items":_.value?[]:[{label:"settings.settings",icon:"mdi-cog-outline",action:()=>{i.$router.push({path:"settings"})}}]},null,8,["menu-items"]),d(J,{variant:"panel"},{default:r(()=>[(s(),v(oe,null,{fallback:r(()=>[d(ye,{indeterminate:""})]),default:r(()=>[g("div",null,[d(je),d(Pe)])]),_:1}))]),_:1})]))}});const nt=P(Ye,[["__scopeId","data-v-6e8c4c0d"]]);export{nt as default};
