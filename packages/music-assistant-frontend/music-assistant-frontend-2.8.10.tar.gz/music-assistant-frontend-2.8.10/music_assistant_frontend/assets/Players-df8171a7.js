import{d as R,an as T,r as F,b as n,a7 as G,a as I,z as U,P as y,N as z,c as i,g as u,f as r,w as o,Y as P,t as c,e as l,G as D,F as C,h,j as k,u as m,i as V}from"./index-d8f72d9c.js";import{_ as M,e as O}from"./eventbus-55fa23b1.js";import{B as w}from"./Button-257b972a.js";import{L as S}from"./ListItem-d2f27c63.js";import{C as j}from"./Container-b694a4b0.js";import{s as x,V as X,w as A}from"./VListItem-99f39ae4.js";import{V as W}from"./VCard-120d3152.js";import{V as q}from"./VMenu-c477cd50.js";import{V as H}from"./VToolbar-46cf4633.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css              */import"./VCardText-361d19f4.js";const J={style:{"margin-bottom":"10px"}},K={class:"line-clamp-1"},Q={class:"line-clamp-1"},ue=R({__name:"Players",setup(Z){const _=T(),d=F([]),E=n.subscribe_multi([G.PLAYER_CONFIG_UPDATED],()=>{b()});I(E);const f=U(()=>Object.values(n.providers).filter(e=>e.available&&e.supported_features.includes(y.PLAYER_GROUP_CREATE)||e.supported_features.includes(y.SYNC_PLAYERS)).sort((e,t)=>(e.name||n.providerManifests[e.domain].name).toUpperCase()>(t.name||n.providerManifests[t.domain].name).toUpperCase()?1:-1)),b=async function(){d.value=(await n.getPlayerConfigs()).sort((e,t)=>p(e).localeCompare(p(t)))},N=function(e){n.removePlayerConfig(e),d.value=d.value.filter(t=>t.player_id!=e)},g=function(e){e in n.players&&_.push(`/settings/editplayer/${e}`)},$=function(e){_.push(`/settings/addgroup/${e}`)},B=function(e){e.enabled=!e.enabled,n.savePlayerConfig(e.player_id,{enabled:e.enabled})},p=function(e){var t;return e.name||((t=n.players[e.player_id])==null?void 0:t.display_name)||e.default_name||e.player_id},L=function(e){window.open(e,"_blank")},Y=function(e,t){var s;const a=[{label:"settings.configure",labelArgs:[],action:()=>{g(t.player_id)},icon:"mdi-cog",disabled:!n.getProvider(t.provider)},{label:t.enabled?"settings.disable":"settings.enable",labelArgs:[],action:()=>{B(t)},icon:"mdi-cancel",disabled:!n.getProvider(t.provider)},{label:"settings.documentation",labelArgs:[],action:()=>{var v;L(((v=n.getProviderManifest(t.provider))==null?void 0:v.documentation)||"")},icon:"mdi-bookshelf",disabled:!((s=n.getProviderManifest(t.provider))!=null&&s.documentation)},{label:"settings.delete",labelArgs:[],action:()=>{N(t.player_id)},icon:"mdi-delete"}];O.emit("contextmenu",{items:a,posX:e.clientX,posY:e.clientY})};return z(()=>n.players,e=>{e&&b()},{immediate:!0}),(e,t)=>(i(),u("div",J,[r(H,{density:"compact",class:"titlebar",color:"transparent",style:{height:"55px"}},{title:o(()=>[P(c(e.$t("settings.players")),1)]),append:o(()=>[f.value.length?(i(),l(q,{key:0,scrim:""},{activator:o(({props:a})=>[r(x,D(a,{color:"accent",variant:"outlined"}),{default:o(()=>[P(c(e.$t("settings.add_group_player")),1)]),_:2},1040)]),default:o(()=>[r(W,null,{default:o(()=>[(i(!0),u(C,null,h(f.value,a=>(i(),l(X,{key:a.instance_id,style:{"padding-top":"0","padding-bottom":"0","margin-bottom":"0"},title:a.name,onClick:s=>$(a.instance_id)},{prepend:o(()=>[r(M,{domain:a.domain,size:26,class:"media-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})):k("",!0)]),_:1}),r(j,null,{default:o(()=>[(i(!0),u(C,null,h(d.value,a=>(i(),l(S,{key:a.player_id,"show-menu-btn":"",link:"",onMenu:s=>Y(s,a),onClick:s=>g(a.player_id)},{prepend:o(()=>{var s;return[r(M,{domain:((s=m(n).getProviderManifest(a.provider))==null?void 0:s.domain)||"",size:40,class:"listitem-media-thumb"},null,8,["domain"])]}),title:o(()=>[V("div",K,c(p(a)),1)]),subtitle:o(()=>{var s;return[V("div",Q,c(((s=m(n).getProviderManifest(a.provider))==null?void 0:s.name)||a.provider),1)]}),append:o(()=>{var s;return[a.enabled?(s=m(n).players[a.player_id])!=null&&s.available?k("",!0):(i(),l(w,{key:1,icon:"",title:e.$t("settings.player_not_available")},{default:o(()=>[r(A,{icon:"mdi-timer-sand"})]),_:1},8,["title"])):(i(),l(w,{key:0,icon:"",title:e.$t("settings.player_disabled")},{default:o(()=>[r(A,{icon:"mdi-cancel"})]),_:1},8,["title"]))]}),_:2},1032,["onMenu","onClick"]))),128))]),_:1})]))}});export{ue as default};
