import{c as gt}from"./2.3.0_scenery2.js";import{s as _t}from"./2.3.0_transform.js";import{h as mt}from"./2.3.0_index3.js";import{_ as ft,o as dt,c as yt,l as $t,X as xt,f as vt,w as Mt,r as H,a as at,n as wt,b as st}from"./2.3.0_index.js";const rt=Math.PI,ot=2*rt,D=1e-6,At=ot-D;function pt(e){this._+=e[0];for(let n=1,a=e.length;n<a;++n)this._+=arguments[n]+e[n]}function bt(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return pt;const a=10**n;return function(s){this._+=s[0];for(let o=1,l=s.length;o<l;++o)this._+=Math.round(arguments[o]*a)/a+s[o]}}class Rt{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?pt:bt(n)}moveTo(n,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,a){this._append`L${this._x1=+n},${this._y1=+a}`}quadraticCurveTo(n,a,s,o){this._append`Q${+n},${+a},${this._x1=+s},${this._y1=+o}`}bezierCurveTo(n,a,s,o,l,u){this._append`C${+n},${+a},${+s},${+o},${this._x1=+l},${this._y1=+u}`}arcTo(n,a,s,o,l){if(n=+n,a=+a,s=+s,o=+o,l=+l,l<0)throw new Error(`negative radius: ${l}`);let u=this._x1,t=this._y1,f=s-n,c=o-a,i=u-n,g=t-a,r=i*i+g*g;if(this._x1===null)this._append`M${this._x1=n},${this._y1=a}`;else if(r>D)if(!(Math.abs(g*f-c*i)>D)||!l)this._append`L${this._x1=n},${this._y1=a}`;else{let d=s-u,m=o-t,y=f*f+c*c,C=d*d+m*m,_=Math.sqrt(y),v=Math.sqrt(r),$=l*Math.tan((rt-Math.acos((y+r-C)/(2*_*v)))/2),M=$/v,A=$/_;Math.abs(M-1)>D&&this._append`L${n+M*i},${a+M*g}`,this._append`A${l},${l},0,0,${+(g*d>i*m)},${this._x1=n+A*f},${this._y1=a+A*c}`}}arc(n,a,s,o,l,u){if(n=+n,a=+a,s=+s,u=!!u,s<0)throw new Error(`negative radius: ${s}`);let t=s*Math.cos(o),f=s*Math.sin(o),c=n+t,i=a+f,g=1^u,r=u?o-l:l-o;this._x1===null?this._append`M${c},${i}`:(Math.abs(this._x1-c)>D||Math.abs(this._y1-i)>D)&&this._append`L${c},${i}`,s&&(r<0&&(r=r%ot+ot),r>At?this._append`A${s},${s},0,1,${g},${n-t},${a-f}A${s},${s},0,1,${g},${this._x1=c},${this._y1=i}`:r>D&&this._append`A${s},${s},0,${+(r>=rt)},${g},${this._x1=n+s*Math.cos(l)},${this._y1=a+s*Math.sin(l)}`)}rect(n,a,s,o){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${s=+s}v${+o}h${-s}Z`}toString(){return this._}}function Tt(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Pt(e,n,a,s,o){for(var l=e.children,u,t=-1,f=l.length,c=e.value&&(s-n)/e.value;++t<f;)u=l[t],u.y0=a,u.y1=o,u.x0=n,u.x1=n+=u.value*c}function St(){var e=1,n=1,a=0,s=!1;function o(u){var t=u.height+1;return u.x0=u.y0=a,u.x1=e,u.y1=n/t,u.eachBefore(l(n,t)),s&&u.eachBefore(Tt),u}function l(u,t){return function(f){f.children&&Pt(f,f.x0,u*(f.depth+1)/t,f.x1,u*(f.depth+2)/t);var c=f.x0,i=f.y0,g=f.x1-a,r=f.y1-a;g<c&&(c=g=(c+g)/2),r<i&&(i=r=(i+r)/2),f.x0=c,f.y0=i,f.x1=g,f.y1=r}}return o.round=function(u){return arguments.length?(s=!!u,o):s},o.size=function(u){return arguments.length?(e=+u[0],n=+u[1],o):[e,n]},o.padding=function(u){return arguments.length?(a=+u,o):a},o}function B(e){return function(){return e}}const ht=Math.abs,x=Math.atan2,N=Math.cos,Ct=Math.max,it=Math.min,S=Math.sin,V=Math.sqrt,w=1e-12,Z=Math.PI,K=Z/2,qt=2*Z;function zt(e){return e>1?0:e<-1?Z:Math.acos(e)}function lt(e){return e>=1?K:e<=-1?-K:Math.asin(e)}function Et(e){let n=3;return e.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);n=s}return e},()=>new Rt(n)}function kt(e){return e.innerRadius}function Bt(e){return e.outerRadius}function It(e){return e.startAngle}function Nt(e){return e.endAngle}function Dt(e){return e&&e.padAngle}function Ft(e,n,a,s,o,l,u,t){var f=a-e,c=s-n,i=u-o,g=t-l,r=g*f-i*c;if(!(r*r<w))return r=(i*(n-l)-g*(e-o))/r,[e+r*f,n+r*c]}function J(e,n,a,s,o,l,u){var t=e-a,f=n-s,c=(u?l:-l)/V(t*t+f*f),i=c*f,g=-c*t,r=e+i,d=n+g,m=a+i,y=s+g,C=(r+m)/2,_=(d+y)/2,v=m-r,$=y-d,M=v*v+$*$,A=o-l,T=r*y-m*d,z=($<0?-1:1)*V(Ct(0,A*A*M-T*T)),E=(T*$-v*z)/M,k=(-T*v-$*z)/M,P=(T*$+v*z)/M,b=(-T*v+$*z)/M,R=E-C,h=k-_,p=P-C,I=b-_;return R*R+h*h>p*p+I*I&&(E=P,k=b),{cx:E,cy:k,x01:-i,y01:-g,x11:E*(o/A-1),y11:k*(o/A-1)}}function Lt(){var e=kt,n=Bt,a=B(0),s=null,o=It,l=Nt,u=Dt,t=null,f=Et(c);function c(){var i,g,r=+e.apply(this,arguments),d=+n.apply(this,arguments),m=o.apply(this,arguments)-K,y=l.apply(this,arguments)-K,C=ht(y-m),_=y>m;if(t||(t=i=f()),d<r&&(g=d,d=r,r=g),!(d>w))t.moveTo(0,0);else if(C>qt-w)t.moveTo(d*N(m),d*S(m)),t.arc(0,0,d,m,y,!_),r>w&&(t.moveTo(r*N(y),r*S(y)),t.arc(0,0,r,y,m,_));else{var v=m,$=y,M=m,A=y,T=C,z=C,E=u.apply(this,arguments)/2,k=E>w&&(s?+s.apply(this,arguments):V(r*r+d*d)),P=it(ht(d-r)/2,+a.apply(this,arguments)),b=P,R=P,h,p;if(k>w){var I=lt(k/r*S(E)),j=lt(k/d*S(E));(T-=I*2)>w?(I*=_?1:-1,M+=I,A-=I):(T=0,M=A=(m+y)/2),(z-=j*2)>w?(j*=_?1:-1,v+=j,$-=j):(z=0,v=$=(m+y)/2)}var F=d*N(v),L=d*S(v),O=r*N(A),Q=r*S(A);if(P>w){var X=d*N($),G=d*S($),U=r*N(M),W=r*S(M),q;if(C<Z)if(q=Ft(F,L,U,W,X,G,O,Q)){var Y=F-q[0],tt=L-q[1],nt=X-q[0],et=G-q[1],ut=1/S(zt((Y*nt+tt*et)/(V(Y*Y+tt*tt)*V(nt*nt+et*et)))/2),ct=V(q[0]*q[0]+q[1]*q[1]);b=it(P,(r-ct)/(ut-1)),R=it(P,(d-ct)/(ut+1))}else b=R=0}z>w?R>w?(h=J(U,W,F,L,d,R,_),p=J(X,G,O,Q,d,R,_),t.moveTo(h.cx+h.x01,h.cy+h.y01),R<P?t.arc(h.cx,h.cy,R,x(h.y01,h.x01),x(p.y01,p.x01),!_):(t.arc(h.cx,h.cy,R,x(h.y01,h.x01),x(h.y11,h.x11),!_),t.arc(0,0,d,x(h.cy+h.y11,h.cx+h.x11),x(p.cy+p.y11,p.cx+p.x11),!_),t.arc(p.cx,p.cy,R,x(p.y11,p.x11),x(p.y01,p.x01),!_))):(t.moveTo(F,L),t.arc(0,0,d,v,$,!_)):t.moveTo(F,L),!(r>w)||!(T>w)?t.lineTo(O,Q):b>w?(h=J(O,Q,X,G,r,-b,_),p=J(F,L,U,W,r,-b,_),t.lineTo(h.cx+h.x01,h.cy+h.y01),b<P?t.arc(h.cx,h.cy,b,x(h.y01,h.x01),x(p.y01,p.x01),!_):(t.arc(h.cx,h.cy,b,x(h.y01,h.x01),x(h.y11,h.x11),!_),t.arc(0,0,r,x(h.cy+h.y11,h.cx+h.x11),x(p.cy+p.y11,p.cx+p.x11),_),t.arc(p.cx,p.cy,b,x(p.y11,p.x11),x(p.y01,p.x01),!_))):t.arc(0,0,r,A,M,_)}if(t.closePath(),i)return t=null,i+""||null}return c.centroid=function(){var i=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,g=(+o.apply(this,arguments)+ +l.apply(this,arguments))/2-Z/2;return[N(g)*i,S(g)*i]},c.innerRadius=function(i){return arguments.length?(e=typeof i=="function"?i:B(+i),c):e},c.outerRadius=function(i){return arguments.length?(n=typeof i=="function"?i:B(+i),c):n},c.cornerRadius=function(i){return arguments.length?(a=typeof i=="function"?i:B(+i),c):a},c.padRadius=function(i){return arguments.length?(s=i==null?null:typeof i=="function"?i:B(+i),c):s},c.startAngle=function(i){return arguments.length?(o=typeof i=="function"?i:B(+i),c):o},c.endAngle=function(i){return arguments.length?(l=typeof i=="function"?i:B(+i),c):l},c.padAngle=function(i){return arguments.length?(u=typeof i=="function"?i:B(+i),c):u},c.context=function(i){return arguments.length?(t=i??null,c):t},c}const Vt={name:"SunburstChart",mounted(){this.drawSunburstChart()},data(){return{palette:{},ingredients:[{name:"Carbohydrates",grams:14,ingredients:[{name:"Dietary Fiber",grams:3}]},{name:"Fats",grams:12,ingredients:[{name:"Saturated Fat",grams:4}]}]}},methods:{parse_qualities(){const e=this.ingredients,n={name:"root",children:[]};function a(s){return{name:s.name,size:s.grams,children:s.ingredients?s.ingredients.map(a):[]}}return n.children=e.map(a),n},add_labels({svg:e,root:n}){e.append("g").attr("pointer-events","none").attr("text-anchor","middle").attr("font-size",10).attr("font-family","sans-serif").selectAll("text").data(n.descendants().filter(a=>a.depth&&(a.y0+a.y1)/2*(a.x1-a.x0)>10)).join("text").attr("transform",function(a){const s=(a.x0+a.x1)/2*180/Math.PI,o=(a.y0+a.y1)/2;return`rotate(${s-90}) translate(${o},0) rotate(${s<180?0:180})`}).attr("dy","0.35em").text(a=>a.data.name)},drawSunburstChart(){const a=this.parse_qualities(),s=_t(this.$refs.latch).append("svg").attr("width",600).attr("height",600).append("g").attr("transform","translate(300,300)"),o=St().size([2*Math.PI,300]),l=mt(a).sum(t=>t.size).sort((t,f)=>f.value-t.value);o(l);const u=Lt().startAngle(t=>t.x0).endAngle(t=>t.x1).innerRadius(t=>t.y0).outerRadius(t=>t.y1);s.selectAll("path").data(l.descendants()).enter().append("path").attr("d",u).attr("fill",t=>"#44F").attr("stroke","#fff").attr("stroke-width","2px").append("title").text(t=>t.data.name),s.selectAll("text").data(l.descendants()).enter().append("text").attr("transform",t=>{const f=(t.x0+t.x1)/2*180/Math.PI,c=(t.y0+t.y1)/2;return`rotate(${f-90}) translate(${c},0) rotate(${f<180?0:180})`}).attr("text-anchor","middle").attr("dy",".35em").text(t=>t.depth>0?t.data.name:"")}}},Zt=Vt,jt={ref:"latch"};function Ot(e,n,a,s,o,l){return dt(),yt("div",jt,null,512)}const Qt=ft(Zt,[["render",Ot]]),Xt={components:{s_select:$t,change_indicator:gt,Sunburst_01:Qt},data(){return{}},methods:{on_change(e){}},mounted(){const e=this.$refs.canvas;new xt.Particle(e,{color:"#25bfff",lineShape:"cube",range:2e3,proximity:100,parallax:!0})}},Gt=Xt,Ht={style:{position:"relative",height:"500px",width:"500px"}},Jt={ref:"canvas",style:{height:"500px",width:"100%"}};function Kt(e,n,a,s,o,l){const u=H("s_select"),t=H("Sunburst_01"),f=H("change_indicator"),c=H("lounge");return dt(),vt(c,null,{default:Mt(({palette:i,terrain:g,$attrs:r})=>[at("h1",{style:wt({color:i[2]})},"scenery",4),st(u,{name:"selector",preselected_option:7838294,options:["7838294","22783"],change:function(d){console.log(d)},select_styles:{}},null,8,["change"]),st(t),at("div",Ht,[st(f)]),at("div",Jt,null,512)]),_:1})}const nn=ft(Gt,[["render",Kt]]);export{nn as default};
