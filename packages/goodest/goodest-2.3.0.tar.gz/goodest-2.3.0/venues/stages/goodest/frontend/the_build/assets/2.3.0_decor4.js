import{q as $,d as k,e as N,u as E,_ as C,v as G,r as n,o as c,f as T,w as i,b as s,a as t,g as d,T as P,c as u,F as j,x as V,n as f,j as R,t as I,y as Y,z}from"./2.3.0_index.js";import{f as L,r as B}from"./2.3.0_string.js";import{i as D,s as U}from"./2.3.0_decor13.js";import{s as q}from"./2.3.0_decor14.js";import{c as F}from"./2.3.0_scenery2.js";import"./2.3.0_decor15.js";const K=async({freight:e})=>(console.log("starting search goods",e),await $({path:"guests",envelope:{label:"search goods",freight:e}}));async function M(){await k({field_title:"scan filter",field:N(()=>import("./2.3.0_field3.js"),["assets/2.3.0_field3.js","assets/2.3.0_index.js","assets/2.3.0_index.css"])})}async function W(){await k({field_title:"scan sort",field:N(()=>import("./2.3.0_field4.js"),["assets/2.3.0_field4.js","assets/2.3.0_index.js","assets/2.3.0_index.css"])})}const H={_get:E,furnish_string:L,round_quantity:B,is_kind:D,async input_changed({search_string:e}){console.log("the search string changed:",e),this.search_string=e,this.previous_search_string!==this.search_string?(this.next=!1,this.prev=!1):(this.next=!1,this.prev=!1,this.amount_after>=1&&(this.next=!0),this.amount_before>=1&&(this.prev=!0))},async search_next(){console.log("next",this.limits),this.before=!1,this.after=this.limits.end,this.search()},async search_prev(){this.before=this.limits.start,this.after=!1,console.log("prev"),this.search()},async search(){this.searching=!0,this.next=!1;let e={string:this.search_string,include:{food:!0,supp:!0,meals:!0},limit:25};this.before?e.before=this.before:this.after&&(e.after=this.after),this.previous_search_string=this.search_string;try{const{status:o,parsed:h,proceeds:g}=await K({freight:{filters:e}});if(o===200){const r=g.freight,l=r.stats;this.treasures=r.treasures,this.limits=r.limits,this.amount_after=l.amounts.after,this.amount_before=l.amounts.before,this.amount_found=l.amounts.returned,this.next=!1,this.prev=!1,this.amount_after>=1&&(this.next=!0),this.amount_before>=1&&(this.prev=!0),this.searching=!1;return}}catch(o){console.error(o)}this.treasures=[],this.count=0,this.searching=!1,console.error("The search could not be completed.")},async open_filter_by(){await M()},async open_sort_by(){await W()},ENERGY_PER_G(e){try{return this.round_quantity(e.ENERGY[0]/E(e,["PACKAGE MASS","G"],"?"))+" "+e.ENERGY[1]+" PER G"}catch{console.warn("COULDN'T FIND ENERGY PER GRAM")}return"? KCAL PER G"},FILTERED_NUTRIENTS(e){}},J={props:["open_filter_by","open_sort_by","search","input_changed"],components:{s_button:G,s_input:q},data(){return{search_string:""}},watch:{search_string(e){this.input_changed({search_string:e})}},methods:{send_search(){console.log("send search",this.search_string),this.search({search_string:this.search_string})}}},Q={style:{display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:"5px"}},X=t("div",{style:{width:"10px"}},null,-1),Z={style:{display:"flex",justifyContent:"center",alignItems:"center"}},O=t("div",{style:{width:"10px"}},null,-1),ee=t("section",{style:{padding:"10px 0 0"}},[t("p",{style:{textAlign:"center"}},'Every good listed is made exclusively from "algea", "plants", and or "fungi".')],-1);function te(e,o,h,g,r,l){const m=n("s_input"),_=n("s_button"),y=n("s_panel"),x=n("lounge");return c(),T(x,null,{default:i(({palette:b})=>[s(y,{tabindex:"0",role:"search",style:{padding:"5px",margin:"2px"}},{default:i(()=>[t("section",Q,[s(m,{modelValue:r.search_string,"onUpdate:modelValue":o[0]||(o[0]=p=>r.search_string=p),style:{width:"100%",maxWidth:"500px"},styles:{input:{}}},null,8,["modelValue"]),X,s(_,{clicked:l.send_search,style:{fontSize:"1.4rem"},boundaries:"4px 20px 7px",styles:{inside:{}}},{default:i(()=>[d("search")]),_:1},8,["clicked"])]),t("section",Z,[s(_,{clicked:h.open_filter_by,styles:{inside:{}}},{default:i(()=>[d("filter")]),_:1},8,["clicked"]),O,s(_,{clicked:h.open_sort_by,styles:{inside:{}}},{default:i(()=>[d("sort")]),_:1},8,["clicked"])]),ee]),_:1})]),_:1})}const se=C(J,[["render",te]]),ne={components:{change_indicator:F,s_food_or_supp_summary:U,s_button:G,search_controls:se},methods:H,data(){return{searching:!0,search_string:"",previous_search_string:"",next:!1,prev:!1,counts:{returned:"_",unlimited:"_"},amount_after:0,amount_before:0,message:"",treasures:[],count:"0"}},mounted(){this.search()}};const ie=ne,a=e=>(Y("data-v-f1ff4a03"),e=e(),z(),e),oe=a(()=>t("div",{style:{height:"5px"}},null,-1)),re={key:0},ae={style:{display:"flex",justifyContent:"space-between",width:"100%",boxSizing:"border-box",padding:"5px 10px 5px 0"}},le=a(()=>t("div",{style:{height:"5px"}},null,-1)),ce={key:0},_e=a(()=>t("p",null,"The search did not produce any returns.",-1)),de=[_e],he=a(()=>t("div",{style:{height:"5px"}},null,-1)),pe={style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",height:"40px",paddingTop:"3px",width:"100%",borderRadius:"5px"}},ue=a(()=>t("div",{style:{width:"10px"}},null,-1)),fe=a(()=>t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"50%"}},null,-1)),ge=a(()=>t("div",{style:{width:"10px"}},null,-1));function me(e,o,h,g,r,l){const m=n("search_controls"),_=n("s_food_or_supp_summary"),y=n("s_line"),x=n("change_indicator"),b=n("s_panel"),p=n("s_button"),S=n("lounge");return c(),T(S,null,{default:i(({palette:v,terrain:w})=>[t("main",{"shelves-region":"",style:f({height:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",fontSize:w.width<w.mobile_nav_width?"1.5em":"1em"})},[s(m,{open_filter_by:e.open_filter_by,open_sort_by:e.open_sort_by,search:e.search,input_changed:e.input_changed},null,8,["open_filter_by","open_sort_by","search","input_changed"]),oe,s(b,{board_physics:{overflowY:"scroll",height:"100%"},style:{position:"relative",height:"100%",overflow:"hidden",margin:"0px 2px 2px 2px"}},{default:i(()=>[s(P,{name:"fade"},{default:i(()=>[e.searching?R("",!0):(c(),u("div",re,[(c(!0),u(j,null,V(e.treasures,A=>(c(),u("div",{style:f({position:"relative",color:v[2],width:"100%"})},[t("div",ae,[s(_,{treasure:A,style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},null,8,["treasure"])]),le,s(y)],4))),256)),!e.searching&&Array.isArray(e.treasures)&&e.treasures.length===0?(c(),u("div",ce,de)):R("",!0)]))]),_:2},1024),s(x,{show:e.searching},null,8,["show"])]),_:2},1024),he,s(b,{style:{padding:"2px 16px"}},{default:i(()=>[t("div",pe,[t("div",{style:f({display:"flex",justifyContent:"left",alignItems:"center",width:"25%",color:v[2],textAlign:"left"})},[s(p,{ref:"button",boundaries:"3px 12px 3px",pressable:e.prev,clicked:e.search_prev,styles:{inside:{}}},{default:i(()=>[d("previous")]),_:1},8,["pressable","clicked"]),ue,t("p",null,I(e.amount_before)+" before",1)],4),fe,t("div",{style:f({display:"flex",justifyContent:"right",alignItems:"center",width:"25%",color:v[2],textAlign:"right"})},[t("p",null,I(e.amount_after)+" after ",1),ge,s(p,{ref:"button",boundaries:"3px 12px 3px",pressable:e.next,clicked:e.search_next,styles:{inside:{}}},{default:i(()=>[d("next")]),_:1},8,["pressable","clicked"])],4)])]),_:2},1024)],4)]),_:1})}const Re=C(ie,[["render",me],["__scopeId","data-v-f1ff4a03"]]);export{Re as default};
