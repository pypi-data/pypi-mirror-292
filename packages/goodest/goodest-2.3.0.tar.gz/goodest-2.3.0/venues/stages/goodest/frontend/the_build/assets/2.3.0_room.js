import{d as P,e as T,_ as x,r as f,o as c,c as p,b as g,a as o,t as h,n as A,D as E,I as S,f as z,w as v,J as L,K as I,g as w,j as D,F as C,x as F,p as U,u as W}from"./2.3.0_index.js";import{a as H,f as N}from"./2.3.0_string2.js";import{h as y,g as V,f as J}from"./2.3.0_decor16.js";import{r as K}from"./2.3.0_string.js";import{b as M,o as Q,c as X,n as j,f as B,p as Y}from"./2.3.0_veranda.js";import{s as Z}from"./2.3.0_as_string.js";async function G({goal:e={}}={}){await P({field_title:"goal",field:T(()=>import("./2.3.0_features.js"),["assets/2.3.0_features.js","assets/2.3.0_index.js","assets/2.3.0_index.css","assets/2.3.0_string2.js","assets/2.3.0_decor16.js","assets/2.3.0_string.js","assets/2.3.0_veranda.js","assets/2.3.0_as_string.js"]),properties:{the_goal:e}})}const ee={components:{book_icon:M},props:{name:String,indent:{default:0,type:Number}},methods:{async clicked(){await Q({ingredient:this.name})}}},te=o("div",{style:{height:"4px",width:"4px"}},null,-1);function se(e,s,t,n,r,i){const _=f("book_icon");return c(),p("div",{style:A({display:"flex",alignItems:"center",paddingLeft:(t.indent*20).toString()+"px"})},[g(_,{clicked:i.clicked},null,8,["clicked"]),te,o("div",null,h(t.name),1)],4)}const oe=x(ee,[["render",se]]),ne={props:{percent:String},methods:{the_label(){return typeof this.percent=="string"&&this.percent.length>=1?this.percent+" %":""}}},re={style:{fontFamily:"monospace",fontSize:"1.3em",textAlign:"left"}};function ae(e,s,t,n,r,i){return c(),p("div",re,h(i.the_label()),1)}const ie=x(ne,[["render",ae]]),le={props:{the_string:String},methods:{the_label(){return typeof this.the_string=="string"&&this.the_string.length>=1?this.the_string:""}}},ce={style:{fontFamily:"monospace",fontSize:"1.3em",textAlign:"left"}};function _e(e,s,t,n,r,i){return c(),p("div",ce,h(i.the_label()),1)}const pe=x(le,[["render",_e]]);function ue({grove:e}){if(!Array.isArray(e))return[];const s=X({grove:E(e)}),t=[];for(let n=0;n<s.length;n++){const r=s[n];t.push({1:{component:S(oe),props:{name:this.name_1(r),indent:r.indent}},2:{component:S(pe),props:{the_string:this.ask_for_goal(r)}},3:{component:S(ie),props:{percent:this.ask_for_percentage_string(r)}}})}return t}const de=({names:e,retrieve_grove:s,prepare_rows:t})=>({place:"1",name:e[0],styles:{th:{width:"300px"}},sorting:({rows:n,place:r,direction:i})=>{const _=s();console.log({grove:_});const u=_.sort(function(m,d){m=j({ingredient:m}),d=j({ingredient:d});function b(a){try{return typeof a=="string"?a.toLowerCase():a.props.name.toLowerCase()}catch{}return""}m=b(m),d=b(d);const l=i==="backward";return d>m?l?1:-1:m>d?l?-1:1:0});return t({sorted_grove:u})}});function ge(){this.goal;const e=["names","RDA per Earth Day",'"mass + mass equivalents" percentage'],s=this.ask_for_goal,t=this.ask_for_percentage_string,n=this.grove;var r=[de({names:e,retrieve_grove:()=>E(n),prepare_rows:({sorted_grove:i})=>this.prepare_rows({grove:i})}),{place:"2",name:e[1],sorting:({rows:i,place:_,direction:u})=>{const m=E(this.parsedGrove);function d(l){try{const a=parseFloat(s(l));if(typeof a=="number"&&isNaN(a)===!1)return a}catch(a){console.error(a)}return""}const b=m.sort(function(l,a){return l=d(l),a=d(a),u==="backward"?l===""?1:a===""?-1:l>a?1:l<a?-1:0:l===""?1:a===""||l>a?-1:l<a?1:0});return this.prepare_rows({grove:b})}},{place:"3",name:e[2],sorting:({rows:i,place:_,direction:u})=>{const m=E(this.parsedGrove);function d(l){try{const a=parseFloat(t(l));if(typeof a=="number"&&isNaN(a)===!1)return a}catch(a){console.error(a)}return 0}const b=m.sort(function(l,a){return l=d(l),a=d(a),u==="backward"?l===""?1:a===""?-1:l>a?1:l<a?-1:0:l===""?1:a===""||l>a?-1:l<a?1:0});return this.prepare_rows({grove:b})}}];return r}const me={prepare_rows:ue,prepare_columns:ge,name_1(e){try{return e.info.names[0]}catch(s){console.warn("name not found:",s)}return""},ask_for_goal(e){try{if(y(e,"goal")&&y(e.goal,"criteria")){const s=e.goal.criteria.RDA;if(y(s,"mass + mass equivalents"))return s["mass + mass equivalents"]["per Earth day"].grams["sci note string"]+" grams";if(y(s,"energy"))return s.energy["per Earth day"]["Food Calories"]["sci note string"]+" food calories"}}catch(s){console.info({quality:e}),console.error(s)}return""},ask_for_percentage_string(e){try{if(y(e,"goal")&&y(e.goal,"criteria")){const s=e.goal.criteria.RDA;if(y(s,"mass + mass equivalents"))return s["mass + mass equivalents"]["per Earth day"].portion["decimal string"]}}catch(s){console.error({quality:e,problem:s})}return""},portion(e){try{return e.measures["mass + mass equivalents"]["portion of grove"]["scinote percentage string"]}catch{}return""},goal(e){try{return e.goal["days of ingredient"]["mass + mass equivalents"]["per recipe"]["decimal string"]}catch{console.warn("mass + mass eq not found:",e)}return""},mass_plus_mass_eq(e){const s="per recipe";try{const t=e.measures;if(y(t,"mass + mass equivalents")===!1&&y(t,"biological activity")===!0){const n=t["biological activity"]["per recipe"];if(y(n,"IU"))return[`${B(n.IU["fraction string"],!1)} IU`]}if(y(t,"mass + mass equivalents"))return[e.measures["mass + mass equivalents"][s].grams["scinote string"]]}catch(t){console.warn("mass + mass equivalents not found:",t);try{console.log(e.info.names)}catch{}}return""}},he={components:{g_table:V},props:{include_goals:{type:Boolean,default:!1},grove:{type:Array,default(){return[]}},table_kind:{type:String,default:""},is_recipe:{type:Boolean,default:!1}},beforeCreate(){},data(){return{columns:[],rows:[]}},computed:{percent_label(){return this.table_kind==="EN"?"percent of essential nutrient composition":this.table_kind=="CI"?"percent of cautionary ingredients composition":"?"},parsedGrove(){return Array.isArray(this.grove)?this.grove:[]}},methods:me,mounted(){this.columns=this.prepare_columns(),this.rows=this.prepare_rows({grove:this.parsedGrove}),this.$refs.the_table.column_clicked(this.columns[1])}},fe=he;function ye(e,s,t,n,r,i){const _=f("g_table"),u=f("lounge");return c(),z(u,null,{default:v(({palette:m})=>[g(_,{ref:"the_table",columns:e.columns,rows:e.rows,theme:{palette:{text:m[2]}},style:{}},null,8,["columns","rows","theme"])]),_:1})}const be=x(fe,[["render",ye]]),ve={props:{grams:String,food_calories:String}},xe={key:0,style:{}},ke={style:{textAlign:"right",fontFamily:"monospace",fontSize:"1.2em"}},we=o("td",{style:{width:"120px",textAlign:"left"}}," grams",-1),$e={key:1,style:{}},Ae={style:{textAlign:"right",fontFamily:"monospace",fontSize:"1.2em"}},qe=o("td",{style:{width:"120px",textAlign:"left"}}," food calories",-1),Se={key:2,style:{display:"table-row"}};function De(e,s,t,n,r,i){return c(),p("table",null,[typeof t.grams=="string"&&t.grams.length>=1?(c(),p("tr",xe,[o("td",ke,h(t.grams),1),we])):typeof t.food_calories=="string"&&t.food_calories.length>=1?(c(),p("tr",$e,[o("td",Ae,h(t.food_calories),1),qe])):(c(),p("tr",Se))])}const R=x(ve,[["render",De]]),Re={props:{amount:String}},Ee={style:{textAlign:"right",fontFamily:"monospace",fontSize:"1.2em"}},Ce=o("td",{style:{width:"120px",textAlign:"left"}}," %",-1);function Fe(e,s,t,n,r,i){return c(),p("table",null,[o("tr",null,[o("td",Ee,h(t.amount),1),Ce])])}const ze=x(Re,[["render",Fe]]),Ie={async build_cake_chart(){const s=this.goal.nature.recipe["essential nutrients"].grove;let t=[];for(let n=0;n<s.length;n++)try{const r=s[n].info.names[0],i=parseFloat(s[n].goal.criteria.RDA["mass + mass equivalents"]["per Earth day"].grams["sci note string"]);t.push({label:r,data:i})}catch(r){console.error({problem:r})}this.$refs.mass_pie_chart.show_v2({wedges:t})}},{build_cake_chart:Ne}=Ie,je={components:{s_curtain:L,g_table:V,pie_chart:Y,goals_qualities_table:be},props:{goal:Object,show_goal:{type:Boolean,default:!1},pick:{default(){}},show_pick:{type:Boolean,default:!1}},data(){return{mobile_mode:!0,_terrain:{},rows:[],columns:[],cake_wedges:[],was_mounted:!1,mass_plus_mass_eq_sum:"? grams",food_calories_sum:""}},watch:{_terrain:{deep:!0,handler(){this.calc_mobile_mode()}}},mounted(){this.was_mounted=!0,this.build_cake_chart(),this.calc_mobile_mode()},methods:{furnish_string:H,furnish_array:N,build_cake_chart:Ne,calc_mobile_mode(){if(this.was_mounted===!0){try{if(this.$refs.layout.getBoundingClientRect().width>1200){this.mobile_mode=!1;return}}catch(e){console.error(e)}this.mobile_mode=!0}},find_goal_mass_percent({ingredient:e}){let s=0;try{const t=e.criteria.RDA;s=parseFloat(t["mass + mass equivalents"]["per Earth day"].portion["sci note percent string"])}catch(t){console.warn(t)}return s},find_goal_mass_percent_rounded({ingredient:e}){return K(this.find_goal_mass_percent({ingredient:e}))},build_mass_plus_mass_eq_sum(){let e="? grams";const s=J(this.goal,["nature"],{});try{e=s.statistics.sum["mass + mass equivalents"]["per Earth day"].grams["decimal string"]+" grams"}catch(t){console.warn(t)}this.mass_plus_mass_eq_sum=e},build_cake_wedges(){const e=this.goal,s=N(e,["nature","ingredients"],[]),t=[];for(let n=0;n<s.length;n++){const r=s[n],i=this.find_goal_mass_percent({ingredient:r});t.push({label:r.labels[0],data:i})}console.log({wedges:t}),this.$refs.mass_pie_chart.show_v2({wedges:t})},pick_goal(){this.pick({goal:this.goal})},find_includes(){try{return this.goal.nature.label}catch{}return{}},$__build_columns(){var e=[{place:"1",name:"name",styles:{th:{width:"200px"}},sorting:Z},{place:"2",name:"Goal per Earth Day",sorting:function({rows:s,place:t,direction:n}){return console.log("column 2",{rows:s,place:t,direction:n}),s.sort(function(r,i){r=r[t],i=i[t];const _=r.props.grams,u=r.props.food_calories,m=i.props.grams,d=i.props.food_calories;if(typeof d=="string"&&d.length>=1)return console.log("r2_food_calories"),n==="backward"?-1:1;if(typeof u=="string"&&u.length>=1)return console.log("r1_food_calories"),n==="backward"?1:-1;if(typeof _=="string"&&_.length>=1&&typeof m=="string"&&_.length>=1){const b=parseFloat(_);return parseFloat(m)>b?n==="backward"?-1:1:n==="backward"?1:-1}return 0})}},{place:"3",name:"Goal per Earth Day, % of mass",sorting:function({rows:s,place:t,direction:n}){return s.sort(function(r,i){try{return r=parseFloat(r[t].props.amount),i=parseFloat(i[t].props.amount),console.log({r1:r,r2:i}),i>r?n==="backward"?-1:1:n==="backward"?1:-1}catch(_){console.info(_)}return 0})}}];this.columns=e},build_rows(){const e=this.goal,s=N(e,["nature","qualities"],[]),t=[];for(let n=0;n<s.length;n++){const r=s[n];t.push({1:r.labels[0],2:{component:S(R),props:this.find_goal_amounts({ingredient:r})},3:{component:S(ze),props:{amount:this.find_goal_mass_percent_rounded({ingredient:r})}}})}this.rows=t},find_goal_amounts({ingredient:e}){console.log("find_goal_amounts:",{ingredient:e});let s="",t="";const n=[],r=e.criteria.RDA;try{y(r,"mass + mass equivalents")&&(s=r["mass + mass equivalents"]["per Earth day"].grams["sci note string"])}catch(i){n.push(i)}try{y(r,"energy")&&(t=r.energy["per Earth day"]["Food Calories"]["sci note string"],this.food_calories_sum=t)}catch(i){n.push(i)}return n.length>=1&&console.error({ingredient:e,exceptions:n}),{grams:s,food_calories:t}},find_goal_amount({ingredient:e}){const s=[];try{const t=e.criteria.RDA["mass + mass equivalents"]["per Earth day"].grams["decimal string"];return I(R,{grams:t})}catch(t){s.push(t)}try{return I(R,{food_calories:e.criteria.RDA.energy["per Earth day"]["food calories"]["decimal string"]})}catch(t){s.push(t)}return console.error({ingredient:e,exceptions:s}),I(R,{food_calories:e})},find_goal(){try{return this.goal.nature.label}catch{}return{}},find_label(){try{return this.goal.nature.label}catch{}return""}}},Be=je,Ge={style:{position:"absolute",visibility:"hidden",zIndex:"-1000"}},Le={ref:"layout"},Ve={key:0},Oe={style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},Pe={style:{width:"100%",fontWeight:"bold",textAlign:"center"}},Te=o("h2",{style:{textAlign:"center"}},"caution",-1),Ue={style:{}},We=o("h2",{style:{textAlign:"center"}},"audience",-1),He={style:{display:"flex",alignItems:"center",boxSizing:"border-box",padding:"4px 0"}},Je={style:{width:"100px"}},Ke={style:{position:"relative",margin:0}},Me={style:{paddingLeft:"10px"}},Qe={style:{paddingRight:"4px"}},Xe={key:0},Ye={key:1,style:{display:"inline-flex"}},Ze=o("span",{style:{padding:"0 4px"}},"to",-1),et={key:2},tt={key:3},st=o("h2",{style:{textAlign:"center"}},"ingredient goals",-1),ot={style:{margin:"0 auto",maxWidth:"900px",width:"100%",textAlign:"center"}},nt=o("h3",null,"sums",-1),rt={style:{display:"flex",justifyContent:"space-between"}},at={style:{width:"50%"}},it=o("h3",{style:{margin:0,fontSize:".8em"}},"food calories",-1),lt={style:{margin:0}},ct={style:{width:"50%"}},_t=o("h3",{style:{margin:0,fontSize:".8em"}},"mass + mass equivalents",-1),pt={style:{margin:0}},ut=o("div",{style:{padding:"0.5cm 0"}},[o("p",null,[o("span",null,[o("b",null,"RDA"),w(" is "),o("b",null,"Recommended Dietary Allowance"),w(". ")]),o("span",null,"It's the amount necessary to be healthy per Earth day.")])],-1);function dt(e,s,t,n,r,i){const _=f("s_button"),u=f("s_line"),m=f("s_curtain"),d=f("pie_chart"),b=f("goals_qualities_table"),l=f("lounge");return c(),z(l,null,{default:v(({palette:a,terrain:k})=>[o("div",Ge,h(e._terrain=k),1),o("article",Le,[e.show_goal?(c(),p("div",Ve,[o("div",Oe,[o("h1",Pe,h(e.find_label()),1),e.show_pick?(c(),z(_,{key:0,clicked:e.pick_goal,boundaries:"8px 32px"},{default:v(()=>[w("pick")]),_:1},8,["clicked"])):D("",!0)]),g(u,{style:{margin:"10px 0"}}),o("div",null,[Te,(c(!0),p(C,null,F(e.furnish_array(e.goal,["nature","cautions"],[]),q=>(c(),p("div",Ue,[o("p",null,h(q),1)]))),256))]),g(u,{style:{margin:"10px 0"}}),o("div",null,[We,(c(!0),p(C,null,F(e.furnish_array(e.goal,["nature","limiters"],[]),q=>(c(),p("div",He,[o("div",Je,[o("div",{style:A({display:"inline-block",position:"relative",padding:"4px 8px",border:"1px solid "+a[6],borderRadius:"4px"})},[g(m),o("p",Ke,h(e.furnish_string(q,"label","")),1)],4)]),o("div",Me,[(c(!0),p(C,null,F(e.furnish_array(q,["includes"],[]),($,O)=>(c(),p("p",Qe,[typeof $=="string"?(c(),p("span",Xe,[o("span",null,h($),1)])):Array.isArray($)?(c(),p("span",Ye,[o("span",null,h($[0]),1),Ze,o("span",null,h($[1]),1)])):(c(),p("span",et,[o("span",null,h($),1)])),O!=e.furnish_array(q,["includes"],[]).length-1?(c(),p("span",tt,",")):D("",!0)]))),256))])]))),256))]),g(u,{style:{margin:"10px 0"}}),o("div",null,[st,o("div",ot,[g(u,{style:{margin:"10px 0"}}),nt,o("div",rt,[o("div",at,[it,o("p",lt,h(this.food_calories_sum),1)]),o("div",ct,[_t,o("p",pt,h(this.mass_plus_mass_eq_sum),1)])])]),g(u,{style:{margin:"10px 0"}}),ut,g(u,{style:{margin:"10px 0"}}),o("div",{style:A({display:"flex",justifyContent:"space-around",flexDirection:e.mobile_mode?"column":"row-reverse"})},[o("div",{style:A({position:"relative",width:e.mobile_mode?"100%":"40%",minHeight:"340px",display:"flex",justifyContent:"center"})},[g(d,{ref:"mass_pie_chart",style:A({position:"relative",top:0,left:0,margin:e.mobile_mode?"0 auto":"0",height:"auto",width:"100%",maxWidth:"500px",maxHeight:"500px"})},null,8,["style"])],4)],4),g(u,{style:{margin:"10px 0"}}),g(b,{grove:e.furnish_array(e.goal,["nature","recipe","essential nutrients","grove"],[]),table_kind:"EN"},null,8,["grove"])])])):D("",!0)],512)]),_:1})}const gt=x(Be,[["render",dt]]),mt={inject:["goals_store"],components:{goal_furniture:gt,s_curtain:L,s_line:U},data(){return{goals:[],goal:{},goal_picked:this.goals_store.warehouse().goal_picked}},created(){this.goals_store_monitor=this.goals_store.monitor(({inaugural:e,field:s})=>{this.goals=this.goals_store.warehouse().goals,this.goal=this.goals_store.warehouse().goal,this.goal_picked=this.goals_store.warehouse().goal_picked,console.log("goals_store_monitor",{goals:this.goals,goal:this.goal,goal_picked:this.goal_picked})})},beforeUnmount(){this.goals_store_monitor.stop()},methods:{_get:W,async open_goal(){await G({goal:this.goal})},open_goal_details({goal:e}){G({goal:e})},async erase_goal(){await this.goals_store.moves.erase_goal()},pick_goal({goal:e}){this.pick({goal:e})},async pick({goal:e}){console.log("pick"),await this.goals_store.moves.pick_goal({goal:e})},find_label(){try{return this.goal.nature.label}catch{}return""}},async mounted(){await this.goals_store.moves.retrieve_goals()}},ht=mt,ft={style:{display:"flex",height:"100%",flexDirection:"column"}},yt=o("div",{style:{padding:"1cm 0",textAlign:"center"}},[o("h1",{style:{fontSize:"2em"}},"Goals"),o("div",{style:{height:"0.2cm"}}),o("p",null,"This is where nutrition goals can be chosen.")],-1),bt=o("p",null,"Goal Chosen:",-1),vt={style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},xt=o("div",{style:{height:"10px"}},null,-1),kt=o("h1",{style:{padding:"16px 0px",textAlign:"center"}},"Possibilities",-1),wt={style:{borderRadius:"4px",boxSizing:"border-box"}},$t={style:{display:"flex",justifyContent:"space-between",alignItems:"center"}};function At(e,s,t,n,r,i){const _=f("s_button"),u=f("s_panel"),m=f("goal_furniture"),d=f("s_line"),b=f("lounge");return c(),z(b,null,{default:v(({palette:l,terrain:a})=>[o("div",ft,[yt,g(u,{style:{margin:"10px 0",padding:"2px 16px"}},{default:v(()=>[bt,o("div",vt,[o("h1",null,h(this.find_label()),1),o("div",null,[g(_,{clicked:e.erase_goal,pressable:e.goal_picked,boundaries:"8px 32px"},{default:v(()=>[w("unpick")]),_:1},8,["clicked","pressable"]),g(_,{clicked:e.open_goal,pressable:e.goal_picked,boundaries:"8px 32px"},{default:v(()=>[w("details")]),_:1},8,["clicked","pressable"])])])]),_:1}),xt,g(u,{style:{padding:"2px 16px"}},{default:v(()=>[kt,(c(!0),p(C,null,F(e.goals,k=>(c(),p("div",wt,[o("div",$t,[o("div",null,h(e._get(k,"nature.label","")),1),o("div",null,[g(_,{clicked:()=>{e.pick_goal({goal:k})},pressable:k.emblem!==e.goal.emblem,boundaries:"8px 32px"},{default:v(()=>[w("pick")]),_:2},1032,["clicked","pressable"]),g(_,{clicked:()=>{e.open_goal_details({goal:k})},pressable:!0,boundaries:"8px 32px"},{default:v(()=>[w("details")]),_:2},1032,["clicked"])]),D("",!0)]),g(d,{style:{margin:"10px 0"}})]))),256)),!Array.isArray(e.goals)||Array.isArray(e.goals)&&e.goals.length===0?(c(),p("div",{key:0,style:A({borderRadius:"4px",boxSizing:"border-box",border:"2px solid "+l[6],padding:".25in"})}," No goal options were found. ",4)):D("",!0)]),_:2},1024)])]),_:1})}const qt=x(ht,[["render",At]]),zt=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"}));export{gt as g,zt as r};
