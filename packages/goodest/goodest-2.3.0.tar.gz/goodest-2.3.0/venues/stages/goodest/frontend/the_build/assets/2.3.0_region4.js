import{s as W,c as tt}from"./2.3.0_transform.js";import{h as nt}from"./2.3.0_index3.js";import{$ as et,_ as V,r as N,o as H,f as Y,w as X,a as R,n as rt,b as ot}from"./2.3.0_index.js";function at(t){return W(tt(t).call(document.documentElement))}function it(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function z(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,e=t.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+t.slice(r+1)]}function st(t){return t=z(Math.abs(t)),t?t[1]:NaN}function ct(t,n){return function(r,e){for(var i=r.length,c=[],d=0,f=t[0],l=0;i>0&&f>0&&(l+f+1>e&&(f=Math.max(1,e-l)),c.push(r.substring(i-=f,i+f)),!((l+=f+1)>e));)f=t[d=(d+1)%t.length];return c.reverse().join(n)}}function dt(t){return function(n){return n.replace(/[0-9]/g,function(r){return t[+r]})}}var ft=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function F(t){if(!(n=ft.exec(t)))throw new Error("invalid format: "+t);var n;return new v({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}F.prototype=v.prototype;function v(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}v.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lt(t){t:for(var n=t.length,r=1,e=-1,i;r<n;++r)switch(t[r]){case".":e=i=r;break;case"0":e===0&&(e=r),i=r;break;default:if(!+t[r])break t;e>0&&(e=0);break}return e>0?t.slice(0,e)+t.slice(i+1):t}var Z;function ht(t,n){var r=z(t,n);if(!r)return t+"";var e=r[0],i=r[1],c=i-(Z=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,d=e.length;return c===d?e:c>d?e+new Array(c-d+1).join("0"):c>0?e.slice(0,c)+"."+e.slice(c):"0."+new Array(1-c).join("0")+z(t,Math.max(0,n+c-1))[0]}function U(t,n){var r=z(t,n);if(!r)return t+"";var e=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")}const I={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:it,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>U(t*100,n),r:U,s:ht,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function L(t){return t}var O=Array.prototype.map,G=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ut(t){var n=t.grouping===void 0||t.thousands===void 0?L:ct(O.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",e=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",c=t.numerals===void 0?L:dt(O.call(t.numerals,String)),d=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function y(s){s=F(s);var o=s.fill,h=s.align,u=s.sign,_=s.symbol,g=s.zero,M=s.width,D=s.comma,b=s.precision,C=s.trim,m=s.type;m==="n"?(D=!0,m="g"):I[m]||(b===void 0&&(b=12),C=!0,m="g"),(g||o==="0"&&h==="=")&&(g=!0,o="0",h="=");var J=_==="$"?r:_==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",K=_==="$"?e:/[%p]/.test(m)?d:"",j=I[m],Q=/[defgprs%]/.test(m);b=b===void 0?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function P(a){var w=J,p=K,A,B,$;if(m==="c")p=j(a)+p,a="";else{a=+a;var T=a<0||1/a<0;if(a=isNaN(a)?l:j(Math.abs(a),b),C&&(a=lt(a)),T&&+a==0&&u!=="+"&&(T=!1),w=(T?u==="("?u:f:u==="-"||u==="("?"":u)+w,p=(m==="s"?G[8+Z/3]:"")+p+(T&&u==="("?")":""),Q){for(A=-1,B=a.length;++A<B;)if($=a.charCodeAt(A),48>$||$>57){p=($===46?i+a.slice(A+1):a.slice(A))+p,a=a.slice(0,A);break}}}D&&!g&&(a=n(a,1/0));var k=w.length+a.length+p.length,x=k<M?new Array(M-k+1).join(o):"";switch(D&&g&&(a=n(x+a,x.length?M-p.length:1/0),x=""),h){case"<":a=w+a+p+x;break;case"=":a=w+x+a+p;break;case"^":a=x.slice(0,k=x.length>>1)+w+a+p+x.slice(k);break;default:a=x+w+a+p;break}return c(a)}return P.toString=function(){return s+""},P}function S(s,o){var h=y((s=F(s),s.type="f",s)),u=Math.max(-8,Math.min(8,Math.floor(st(o)/3)))*3,_=Math.pow(10,-u),g=G[8+u/3];return function(M){return h(_*M)+g}}return{format:y,formatPrefix:S}}var E,q;mt({thousands:",",grouping:[3],currency:["$",""]});function mt(t){return E=ut(t),q=E.format,E.formatPrefix,E}const pt={name:"",children:[{name:"CARBOHYDRATES",children:[{name:"DIETARY FIBER",children:[]},{name:"SUGARS",children:[{name:"ADDED SUGARS",value:3534}]}]},{name:"TOTAL FATS",children:[{name:"SATURATED FAT",value:17010},{name:"TRANS FAT",value:0}]}]},gt={data(){return{svg_crate:et(null)}},methods:{BUILD_CHART(){const t=q(","),n=30,r=nt(pt).eachBefore((o=>h=>h.index=o++)(0)),e=r.descendants(),i=1e3,c=(e.length+1)*n,d="24px",f=[{label:"AMOUNT",value:o=>(console.log("AMOUNT:",o),o.value),format:t,x:800},{label:"PER CENT",value:o=>o.children?0:1,format:(o,h)=>h.children?t(o):"-",x:1e3}],l=at("svg").attr("width",i).attr("height",c).attr("style","max-width: 100%; height: auto; overflow: visible;").style("padding-top","100px").style("font","10px sans-serif").attr("viewBox",[0,0,i,c]);l.append("g").attr("fill","none").attr("stroke","black").selectAll().data(r.links()).join("path").attr("d",o=>`
				M${o.source.depth*n},${o.source.index*n}
				V${o.target.index*n}
				h${n}
			`);const y=l.append("g").selectAll().data(e).join("g").attr("transform",o=>`translate(0,${o.index*n})`);y.append("circle").attr("cx",o=>o.depth*n).attr("r",5).attr("fill",o=>(o.children,"white")),y.append("text").attr("dy",".4em").attr("x",o=>o.depth*n+16).text(o=>o.data.name).style("font-size",d).style("fill","purple"),y.append("title").text(o=>o.ancestors().reverse().map(h=>h.data.name).join("/")),l.append("text").attr("dy","0.32em").attr("y",-n).attr("x",0).attr("text-anchor","start").attr("font-weight","bold").text("NUTRIENTS").style("font-size",d).style("fill","purple");for(const{label:o,value:h,format:u,x:_}of f)l.append("text").attr("dy","0.32em").attr("y",-n).attr("x",_).attr("text-anchor","end").attr("font-weight","bold").text(o).style("font-size",d).style("fill","purple"),y.append("text").attr("dy","0.32em").attr("x",_).attr("text-anchor","end").attr("fill",g=>(g.children,"#FFF")).data(r.copy().sum(h).descendants()).text(g=>u(g.value,g)).style("font-size",d).style("fill","purple");var S=l.node(),s=this.svg_crate;this.$refs.svg_crate.append(S),console.log(this.$refs.svg_crate),console.log({SVG_NODE:S,svg_crate:s})}},mounted(){this.BUILD_CHART()}},yt=gt,xt=R("div",null,"composition waterfall",-1),_t={ref:"svg_crate"};function bt(t,n,r,e,i,c){const d=N("lounge");return H(),Y(d,null,{default:X(({palette:f,style:l,physics:y})=>[xt,R("div",_t,null,512)]),_:1})}const wt=V(yt,[["render",bt]]),At={components:{nutrients_DAC:wt}},St=At;function Mt(t,n,r,e,i,c){const d=N("nutrients_DAC"),f=N("lounge");return H(),Y(f,null,{default:X(({palette:l,terrain:y,$attrs:S})=>[R("h1",{style:rt({color:l[2]})},"nutrient directional acyclic chart",4),ot(d)]),_:1})}const Et=V(St,[["render",Mt]]);export{Et as default};
