import"./2.3.0_string.js";import{_ as v,r as p,o as f,c as x,b as u,a as o,t as $,n as h,D as g,I as N,H as m,f as E,w as k,d as D,e as I,C as O,l as j,u as A}from"./2.3.0_index.js";import{f as y,b as q,o as W,c as G,n as R,p as L}from"./2.3.0_veranda.js";import{g as U}from"./2.3.0_decor16.js";function S({ingredient:e}){try{return y(e.measures["mass + mass equivalents"]["per recipe"].grams["fraction string"],!1)}catch{}return""}const F={components:{book_icon:q},props:{name:String,indent:{default:0,type:Number}},methods:{async clicked(){await W({ingredient:this.name})}}},H=o("div",{style:{height:"4px",width:"4px"}},null,-1);function T(e,t,r,i,c,l){const a=p("book_icon");return f(),x("div",{style:h({display:"flex",alignItems:"center",paddingLeft:(r.indent*20).toString()+"px"})},[u(a,{clicked:l.clicked},null,8,["clicked"]),H,o("div",null,$(r.name),1)],4)}const V=v(F,[["render",T]]),P={props:{percent:String},methods:{the_label(){return typeof this.percent=="string"&&this.percent.length>=1?this.percent+" %":""}}},J={style:{fontFamily:"monospace",fontSize:"1.3em"}};function K(e,t,r,i,c,l){return f(),x("div",J,$(l.the_label()),1)}const M=v(P,[["render",K]]),Q={props:{the_string:String},methods:{the_label(){return typeof this.the_string=="string"&&this.the_string.length>=1?this.the_string:""}}},X={style:{fontFamily:"monospace",fontSize:"1.3em"}};function Y(e,t,r,i,c,l){return f(),x("div",X,$(l.the_label()),1)}const Z=v(Q,[["render",Y]]);function ee({grove:e}){if(!Array.isArray(e))return[];const t=G({grove:g(e)}),r=[];for(let i=0;i<t.length;i++){const c=t[i];r.push({1:{component:N(V),props:{name:this.name_1(c),indent:c.indent}},2:{component:N(Z),props:{the_string:this.mass_plus_mass_eq(c)[0]}},3:{component:N(M),props:{percent:this.portion(c)}},4:this.retrieve_attained_as_sci_note_string(c)})}return r}function te(){const e=this.retrieve_attained_as_float,t=["names","mass + mass equivalents, in grams, per package",""];this.table_kind==="EN"?(t[2]="percent of essential nutrient composition",t[3]="Earth days of nutrients per package, based on the picked goal"):this.table_kind=="CI"&&(t[2]="percent of cautionary ingredients composition");var r=[{place:"1",name:t[0],styles:{th:{width:"300px"}},sorting:({rows:i,place:c,direction:l})=>{const a=g(this.parsedGrove);console.log({grove:a});const _=a.sort(function(d,n){d=R({ingredient:d}),n=R({ingredient:n});function s(w){try{return typeof w=="string"?w.toLowerCase():w.props.name.toLowerCase()}catch{}return""}d=s(d),n=s(n);const b=l==="backward";return n>d?b?1:-1:d>n?b?-1:1:0});return this.prepare_rows({grove:_})}},{place:"2",name:"mass + mass equivalents, in grams, per package",sorting:({rows:i,place:c,direction:l})=>{const a=g(this.parsedGrove);console.log({the_grove:a});function _(n){try{const s=S({ingredient:n});if(typeof s=="number"&&isNaN(s)===!1)return s}catch{}return""}const d=a.sort(function(n,s){return n=_(n),s=_(s),l==="backward"?n===""?1:s===""?-1:n>s?1:n<s?-1:0:n===""?1:s===""||n>s?-1:n<s?1:0});return this.prepare_rows({grove:d})}},{place:"3",name:t[2],sorting:({rows:i,place:c,direction:l})=>{const a=g(this.parsedGrove);function _(n){try{const s=S({ingredient:n});if(typeof s=="number"&&isNaN(s)===!1)return s}catch{}return""}const d=a.sort(function(n,s){return n=_(n),s=_(s),l==="backward"?n===""?1:s===""?-1:n>s?1:n<s?-1:0:n===""?1:s===""||n>s?-1:n<s?1:0});return this.prepare_rows({grove:d})}}];return this.table_kind==="EN"&&r.push({place:"4",name:t[3],sorting:({rows:i,place:c,direction:l})=>{const a=g(this.parsedGrove);function _(n){return e(n)}const d=a.sort(function(n,s){return n=_(n),s=_(s),l==="backward"?n===""?1:s===""?-1:n>s?1:n<s?-1:0:n===""?1:s===""||n>s?-1:n<s?1:0});return this.prepare_rows({grove:d})}}),r}const ne={prepare_rows:ee,prepare_columns:te,name_1(e){try{return e.info.names[0]}catch(t){console.warn("name not found:",t)}return""},portion(e){try{return e.measures["mass + mass equivalents"]["portion of grove"]["scinote percentage string"]}catch{}return""},retrieve_attained_as_sci_note_string(e){try{if(m(e,"attained"))return e.attained.RDA["mass + mass equivalents"]["per recipe"]["Earth days"]["sci note string"]}catch(t){console.warn("attained as float exception:",{quality:e,problem:t})}return""},retrieve_attained_as_float(e){try{if(m(e,"attained")){const r=e.attained.RDA["mass + mass equivalents"]["per recipe"]["Earth days"]["sci note string"],i=parseFloat(r);if(typeof i=="number"&&isNaN(i)===!1)return i}}catch(t){console.warn("attained as float exception:",{quality:e,problem:t})}return""},mass_plus_mass_eq(e){const t="per recipe";try{const r=e.measures;if(m(r,"mass + mass equivalents")===!1&&m(r,"biological activity")===!0){const i=r["biological activity"]["per recipe"];if(m(i,"IU"))return[`${y(i.IU["fraction string"],!1)} IU`]}if(m(r,"mass + mass equivalents"))return[e.measures["mass + mass equivalents"][t].grams["scinote string"]]}catch(r){console.warn("mass + mass equivalents not found:",r);try{console.log(e.info.names)}catch{}}return""}},se={components:{g_table:U},props:{include_goals:{type:Boolean,default:!1},grove:{type:Array,default(){return[]}},table_kind:{type:String,default:""},is_recipe:{type:Boolean,default:!1}},beforeCreate(){},data(){return{columns:[],rows:[]}},computed:{percent_label(){return this.table_kind==="EN"?"percent of essential nutrient composition":this.table_kind=="CI"?"percent of cautionary ingredients composition":"?"},parsedGrove(){return Array.isArray(this.grove)?this.grove:[]}},methods:ne,mounted(){this.columns=this.prepare_columns(),this.rows=this.prepare_rows({grove:this.parsedGrove}),this.$refs.the_table.column_clicked(this.columns[1])}},oe=se;function re(e,t,r,i,c,l){const a=p("g_table"),_=p("lounge");return f(),E(_,null,{default:k(({palette:d})=>[u(a,{ref:"the_table",columns:e.columns,rows:e.rows,theme:{palette:{text:d[2]}},style:{}},null,8,["columns","rows","theme"])]),_:1})}const B=v(oe,[["render",re]]);async function ie(e){const t=e.properties;await D({field_title:"essential nutrients",field:I(()=>import("./2.3.0_feature.js"),["assets/2.3.0_feature.js","assets/2.3.0_index.js","assets/2.3.0_index.css"]),properties:t})}const ae={components:{book:q,s_outer_link:O,s_select:j,nature_ingredients_table:B,pie_chart:L},props:["EN"],data(){return{component_opacity:0,condensed:!1}},watch:{EN(){this.show_pie()}},methods:{show_pie_without_macros(){const e=g(this.EN);e.grove=e.grove.filter(t=>!["protein","carbohydrates","fats"].includes(t.info.names[0])),this.$refs.pie_without_macros.show({land:e})},async show_info(){await ie({})},show_pie(){console.log("show_pie",m(this.EN,"grove")),m(this.EN,"grove")&&this.$refs.pie_every.show({land:g(this.EN)})},energy_parsed(){try{return y(this.EN.measures.energy["per recipe"]["food calories"]["fraction string"])}catch{}return""},mass_plus_mass_eq_parsed(){try{return y(this.EN.measures["mass + mass equivalents"]["per recipe"].grams["fraction string"])}catch{}return""},calc_condensed(){const e=this.$refs.layout,{width:t}=e.getBoundingClientRect();t<=1200?this.condensed=!0:this.condensed=!1}},async mounted(){const e=this.$refs.layout;this.RO=new ResizeObserver((t,r)=>{this.calc_condensed()}),this.calc_condensed(),this.show_pie(),this.component_opacity=1,this.RO.observe(e)},beforeUnmount(){const e=this.$refs.layout;this.RO.unobserve(e)}},ce=ae,le={style:{margin:"0 auto",maxWidth:"800px",paddingBottom:"10px"}},de={style:{textAlign:"center",marginBottom:"0px",display:"flex",alignItems:"center",justifyContent:"center"}},_e=o("span",null,"essential nutrients",-1),pe=o("div",{style:{width:"10px"}},null,-1),ue={style:{margin:"0 auto",maxWidth:"900px",width:"100%",textAlign:"right"}},he={style:{margin:"10px 0",display:"inline-block",textAlign:"right"}},me={style:{margin:"0 auto",maxWidth:"900px",width:"100%",textAlign:"center"}},fe=o("h3",null,"sums",-1),ge={style:{display:"flex",justifyContent:"space-between"}},ye={style:{width:"50%"}},ve=o("h3",{style:{margin:0,fontSize:".8em"}},"food calories",-1),be={style:{margin:0}},we={style:{width:"50%"}},xe=o("h3",{style:{margin:0,fontSize:".8em"}},"mass + mass equivalents",-1),$e={style:{margin:0}},ke=o("div",{style:{height:"0.5cm",width:"0.5cm"}},null,-1),Ne=o("div",{style:{textAlign:"left",maxWidth:"700px",margin:"0 auto",lineHeight:"1.1em"}},[o("p",null,[o("span",null,'This cake chart shows the "mass + mass equivalents" fractions of the essential nutrients. '),o("span",null,"A lot of groceries have unreported mass. "),o("span",null,"The unreported mass is not shown in this chart.")])],-1),Ae=o("div",{style:{height:"10px"}},null,-1);function Ee(e,t,r,i,c,l){const a=p("book"),_=p("s_select"),d=p("s_line"),n=p("pie_chart"),s=p("nature_ingredients_table"),b=p("s_panel"),w=p("lounge");return f(),E(w,null,{default:k(({palette:C,terrain:Fe})=>[u(b,{style:h({opacity:e.component_opacity})},{default:k(()=>[o("header",le,[o("h2",de,[_e,pe,u(a,{clicked:e.show_info},null,8,["clicked"])])]),o("div",ue,[o("div",he,[u(_,{name:"amount",preselected_option:"per package",options:["per package"],change:function(z){console.log(z)}},null,8,["change"])])]),o("div",me,[u(d,{style:{margin:"10px 0"}}),fe,o("div",ge,[o("div",ye,[ve,o("p",be,$(this.energy_parsed()),1)]),o("div",we,[xe,o("p",$e,$(this.mass_plus_mass_eq_parsed()),1)])]),u(d,{style:{margin:"10px 0"}})]),o("div",null,[o("div",{style:h({display:"flex",flexDirection:"column",justifyContent:e.condensed?"center":"left",boxSizing:"border-box",width:(e.condensed,"100%"),padding:".125in",border:"2px solid "+C[6]})},[o("div",{style:h({display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",boxSizing:"border-box",width:e.condensed?"100%":"auto",height:e.condensed?"400px":"500px",padding:".125in",borderRadius:"4px"})},[u(n,{ref:"pie_every",style:h({height:(e.condensed,"100%"),maxWidth:(e.condensed,"500px"),maxHeight:(e.condensed,"500px")})},null,8,["style"])],4),ke,Ne,Ae],4)]),o("div",{ref:"layout",style:h({display:"flex",flexDirection:e.condensed?"column-reverse":"row",justifyContent:"center"})},[o("div",{style:h({display:"flex",boxSizing:"border-box",width:e.condensed?"100%":"auto",minWidth:"500px",minHeight:"100px",justifyContent:e.condensed?"center":"left",padding:".125in"})},[u(s,{include_goals:!0,grove:e.EN.grove,table_kind:"EN"},null,8,["grove"])],4)],4)]),_:2},1032,["style"])]),_:1})}const Je=v(ce,[["render",Ee]]);async function qe(e){const t=e.properties;await D({field_title:"cautionary ingredients",field:I(()=>import("./2.3.0_feature2.js"),["assets/2.3.0_feature2.js","assets/2.3.0_index.js","assets/2.3.0_index.css","assets/2.3.0_string.js","assets/2.3.0_veranda.js","assets/2.3.0_decor16.js"]),properties:t})}const Ce={props:["land"],components:{nature_ingredients_table:B,book:q},data(){return{component_opacity:0,condensed:!1,scanned_for:[]}},watch:{land(){}},methods:{_get:A,async show_info(){const e=this.land;await qe({properties:{scanned_for:this.scanned_for,grove:A(e,"grove","")}})},has_cautionary_ingredients(){const e=this.land,t=A(e,"grove",""),r=[];let i=0,c=0;for(let l=0;l<t.length;l++){const a=t[l];i+=this.retrieve_mass_plus_mass_eq_parsed({measures:a.measures}),c+=a.natures.length,r.push(a.info.names)}return console.log({natures:c}),this.scanned_for=r,c==0||i==0?"no":"yes"},retrieve_mass_plus_mass_eq_parsed({measures:e}){try{return parseFloat(e["mass + mass equivalents"]["per recipe"].grams["scinote string"])}catch{}return 0},energy_parsed(){try{return y(this.land.measures.energy["per recipe"]["food calories"]["fraction string"])}catch{}return""},mass_plus_mass_eq_parsed(){try{return y(this.land.measures["mass + mass equivalents"]["per recipe"].grams["fraction string"])}catch{}return""},calc_condensed(){const e=this.$refs.layout,{width:t}=e.getBoundingClientRect();t<=800?this.condensed=!0:this.condensed=!1}},async mounted(){const e=this.$refs.layout;this.RO=new ResizeObserver((t,r)=>{this.calc_condensed()}),this.calc_condensed(),this.component_opacity=1,this.RO.observe(e)},beforeUnmount(){const e=this.$refs.layout;this.RO.unobserve(e)}},Re=Ce,Se={style:{margin:"0 auto",maxWidth:"800px",paddingBottom:"10px",textAlign:"center"}},De={style:{textAlign:"center",marginBottom:"0px",display:"flex",alignItems:"center",justifyContent:"center"}},Ie=o("span",null,"cautionary ingredients",-1),Be=o("div",{style:{width:"10px"}},null,-1),ze={key:0,style:{padding:".125in 0 "}},Oe=o("p",null,"Ingredients in this list might have adverse health effects.",-1),je=o("p",null,"Empty rows indicate that no data was found.",-1),We={key:1,style:{padding:".125in 0 ",textAlign:"center",width:"100%"}},Ge=o("p",null,"No cautionary ingredients were found.",-1),Le=[Ge];function Ue(e,t,r,i,c,l){const a=p("book"),_=p("nature_ingredients_table"),d=p("s_panel"),n=p("lounge");return f(),E(n,null,{default:k(({palette:s,terrain:b})=>[u(d,{style:h({opacity:e.component_opacity})},{default:k(()=>[o("header",Se,[o("h2",De,[Ie,Be,u(a,{clicked:e.show_info},null,8,["clicked"])])]),o("div",{ref:"layout",style:h({display:"flex",flexDirection:e.condensed?"column-reverse":"row",justifyContent:"center",margin:"0 auto",maxWidth:"900px"})},[o("div",{style:h({display:"flex",flexGrow:2,boxSizing:"border-box",width:e.condensed?"100%":"auto",minWidth:"500px",justifyContent:e.condensed?"center":"left",padding:"0 .125in"})},[e.has_cautionary_ingredients()==="yes"?(f(),x("div",ze,[Oe,je,u(_,{grove:e._get(e.land,"grove",""),table_kind:"CI"},null,8,["grove"])])):(f(),x("div",We,Le))],4)],4)]),_:1},8,["style"])]),_:1})}const Ke=v(Re,[["render",Ue]]);export{Ke as c,Je as e,S as m,B as n};
