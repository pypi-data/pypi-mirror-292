(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2789],{95372:function(e){e.exports=function(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return -1}},74833:function(e,t,n){var i=n(56127),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},56632:function(e,t,n){var i=n(89278),r=n(80068),o=n(50098);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!r(t)){var l=i(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var d=e(t,n,a);return d>-1?s[l?t[d]:d]:void 0}}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},64925:function(e,t,n){var i=n(56632)(n(66259));e.exports=i},66259:function(e,t,n){var i=n(95372),r=n(89278),o=n(47991),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return -1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),i(e,r(t,3),l)}},94919:function(e,t,n){var i=n(91936),r=1/0;e.exports=function(e){return e?(e=i(e))===r||e===-r?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var i=n(94919);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},91936:function(e,t,n){var i=n(74833),r=n(11611),o=n(55193),a=0/0,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=l.test(e);return n||d.test(e)?c(e.slice(2),n?2:8):s.test(e)?a:+e}},69594:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[id]/[urn]",function(){return n(89916)}])},29137:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var i=n(24246);let r=(0,n(17749).IUT)({displayName:"TableIcon",viewBox:"0 0 16 16",path:(0,i.jsx)("path",{fill:"currentColor",d:"M2 14V2H14V14H2ZM3.33333 6H12.6667V3.33333H3.33333V6ZM6.88333 9.33333H9.11667V7.33333H6.88333V9.33333ZM6.88333 12.6667H9.11667V10.6667H6.88333V12.6667ZM3.33333 9.33333H5.55V7.33333H3.33333V9.33333ZM10.45 9.33333H12.6667V7.33333H10.45V9.33333ZM3.33333 12.6667H5.55V10.6667H3.33333V12.6667ZM10.45 12.6667H12.6667V10.6667H10.45V12.6667Z"})})},58114:function(e,t,n){"use strict";var i=n(24246),r=n(69883),o=n(17749),a=n(34803),s=n(94167),l=n(19310);let d=e=>{let{data:t,setValue:n}=e,{getPrimaryKey:r,getDataCategoryByKey:a}=(0,l.Z)(),d=a(r(t.value,2));return(0,i.jsxs)(o.xuv,{onClick:()=>n(t,"select-option"),cursor:"pointer",borderBottomColor:"gray.100",borderBottomWidth:1,paddingX:3,paddingY:1.5,_hover:{backgroundColor:"gray.100"},"data-testid":"option-".concat(t.value),children:[(0,i.jsxs)(o.Ugi,{gap:1,alignItems:"center",children:[(0,i.jsx)(o.Vp9,{paddingX:2,paddingY:0,fontWeight:600,colorScheme:"gray",fontSize:"xs",children:(0,s.G8)((null==d?void 0:d.name)||"")}),(0,i.jsxs)(o.xvT,{fontSize:"sm",whiteSpace:"normal",children:[": ",t.value]})]}),(0,i.jsx)(o.xvT,{fontSize:"xs",lineHeight:"18px",mt:1,color:"gray.500",whiteSpace:"normal",children:t.description})]})};t.Z=e=>{let{onChange:t,menuIsOpen:n,showDisabled:o=!1}=e,{getDataCategoryDisplayName:s,getDataCategories:c}=(0,l.Z)(),u=(o?c():c().filter(e=>e.active)).map(e=>({value:e.fides_key,label:s(e.fides_key),description:e.description||""}));return(0,i.jsx)(r.Z,{placeholder:"Select a category...",onChange:t,options:u,size:"sm",menuPosition:"absolute",autoFocus:!0,isSearchable:!0,menuPlacement:"auto",components:{Option:d},menuIsOpen:n,chakraStyles:{...a.hP,control:e=>({...e,border:"none"}),menuList:e=>({...e,paddingTop:0,paddingBottom:0,mt:10,position:"fixed",overflowX:"hidden",maxWidth:"lg"})}})}},65399:function(e,t,n){"use strict";n.d(t,{HK:function(){return o},VY:function(){return i.V},O3:function(){return s}});var i=n(75139),r=n(60136);let o=()=>{let{errorAlert:e}=(0,i.V)();return{handleError:t=>{let n="An unexpected error occurred. Please try again.";(0,r.Ot)(t)?n=t.data.detail:(0,r.tB)(t)&&(n=t.data.detail[0].msg),e(n)}}};var a=n(27378);let s=e=>{let t=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{let n=n=>{var i;(null===(i=t.current)||void 0===i?void 0:i.contains(n.target))||e()};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[t,e]),{ref:t}}},75139:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var i=n(24246),r=n(17749);let o=()=>{let e=(0,r.pmc)();return{errorAlert:(t,n,o)=>{let a={...o,position:(null==o?void 0:o.position)||"top",render:e=>{let{onClose:o}=e;return(0,i.jsxs)(r.bZj,{alignItems:"normal",status:"error",children:[(0,i.jsx)(r.zMQ,{}),(0,i.jsxs)(r.xuv,{children:[n&&(0,i.jsx)(r.CdC,{children:n}),(0,i.jsx)(r.XaZ,{children:t})]}),(0,i.jsx)(r.PZ7,{onClick:o,position:"relative",right:0,size:"sm",top:-1})]})}};(null==o?void 0:o.id)&&e.isActive(o.id)?e.update(o.id,a):e(a)},successAlert:(t,n,o)=>{let a={...o,position:(null==o?void 0:o.position)||"top",render:e=>{let{onClose:o}=e;return(0,i.jsxs)(r.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,i.jsx)(r.zMQ,{}),(0,i.jsxs)(r.xuv,{children:[n&&(0,i.jsx)(r.CdC,{children:n}),(0,i.jsx)(r.XaZ,{children:t})]}),(0,i.jsx)(r.PZ7,{onClick:o,position:"relative",right:0,size:"sm",top:-1})]})}};(null==o?void 0:o.id)&&e.isActive(o.id)?e.update(o.id,a):e(a)}}}},19310:function(e,t,n){"use strict";var i=n(24246),r=n(64925),o=n.n(r),a=n(44296),s=n(91650),l=n(79851),d=n(47411);let c=()=>{let{isLoading:e}=(0,l.fd)(),t=(0,a.C)(l.U3),{isLoading:n}=(0,d.MO)(),i=(0,a.C)(d.qb),{isLoading:r}=(0,s.te)();return{dataUses:t,dataSubjects:(0,a.C)(s.ZL),dataCategories:i,isLoading:e||n||r}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:r}=c(),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t(e);if(!r)return e;let o=t(a(e,n));return r.parent_key&&(null==o?void 0:o.name)!==r.name?(0,i.jsxs)("span",{children:[(0,i.jsxs)("strong",{children:[null==o?void 0:o.name,":"]})," ",r.name]},e):(0,i.jsx)("strong",{children:r.name},e)},l=t=>o()(e,{fides_key:t}),d=e=>o()(t,{fides_key:e}),u=e=>o()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:l,getDataUseDisplayName:e=>s(e,l,1),getDataCategories:()=>t,getDataCategoryByKey:d,getDataCategoryDisplayName:e=>s(e,d,2),getDataSubjects:()=>n,getDataSubjectByKey:u,getDataSubjectDisplayName:e=>{let t=u(e);return t?t.name:e},getPrimaryKey:a,isLoading:r}}},89916:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var i=n(24246),r=n(92222),o=n(59003),a=n(17749),s=n(86677),l=n(27378),d=n(90824),c=n(81695),u=n(29137),f=n(43124),x=n(11032),p=n(71824),v=n(52850),m=n(58114),h=n(65399),g=n(19310),j=e=>{let{selectedTaxonomies:t,onAddTaxonomy:n,onRemoveTaxonomy:r}=e,[o,s]=(0,l.useState)(!1),{getDataCategoryDisplayName:d}=(0,g.Z)(),c=(0,l.useCallback)(()=>{s(!1)},[]),{ref:u}=(0,h.O3)(c);return(0,i.jsxs)(a.Eq9,{py:2,alignItems:"center",position:"relative",width:"100%",gap:2,overflowX:"auto",ref:u,children:[t.map(e=>(0,i.jsxs)(a.Cts,{fontWeight:"normal",textTransform:"none","data-testid":"classification-".concat(e),px:1.5,children:[d(e),(0,i.jsx)(a.hU,{onClick:()=>r(e),icon:(0,i.jsx)(a.Two,{boxSize:2}),size:"2xs",mt:-.5,ml:2,"aria-label":"Remove category"})]},e)),(0,i.jsx)(a.hU,{w:"20px",h:"20px",minW:"20px",borderRadius:"sm",icon:(0,i.jsx)(a.jBn,{}),onClick:()=>s(!0),"data-testid":"add-category-btn","aria-label":"Add category"}),o&&(0,i.jsx)(a.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,i.jsx)(m.Z,{onChange:e=>{s(!1),n(e.value)},menuIsOpen:!0})})]})},b=n(52987),y=n(39006),C=n(57311),_=n(435),w=n(98894),V=n(5067),Z=e=>{let{field:t,isOpen:n,onClose:r,dataset:o,collection:s}=e,[l]=(0,_.TG)(),{isOpen:d,onOpen:c,onClose:u}=(0,a.qY0)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.ZP,{isOpen:n,onClose:r,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,i.jsx)(C.zR,{title:"Field Name: ".concat(null==t?void 0:t.name),onDelete:c}),footer:(0,i.jsx)(C.Gn,{onClose:r,formId:w.e}),children:(0,i.jsx)(w.Z,{values:t,onSubmit:e=>{let n={...t,...e},i=o.collections.indexOf(s),a=s.fields.indexOf(t);l((0,V._n)(o,n,i,a)),r()},dataType:"field"})}),(0,i.jsx)(a.cVQ,{isOpen:d,onClose:u,onConfirm:()=>{let e=o.collections.indexOf(s),n=s.fields.indexOf(t);l((0,V._z)(o,e,n)),r(),u()},title:"Delete Field",message:(0,i.jsxs)(a.xvT,{children:["You are about to permanently delete the field named"," ",(0,i.jsx)(a.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})};let k=(0,r.Cl)(),O=()=>(0,i.jsx)(a.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,i.jsx)(a.gCW,{children:(0,i.jsx)(a.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});var S=()=>{let e=(0,s.useRouter)(),[t]=(0,b.TG)(),{id:n,urn:m}=e.query,h=Array.isArray(n)?n[0]:n,g=Array.isArray(m)?m[0]:m,C=(null==g?void 0:g.split(".")[0])||"",{isLoading:_,data:w}=(0,b.oM)(h),S=(0,l.useMemo)(()=>(null==w?void 0:w.collections)||[],[w]),z=S.find(e=>e.name===C),T=(0,l.useMemo)(()=>(null==z?void 0:z.fields)||[],[z]),[H,M]=(0,l.useState)(),A=(0,l.useCallback)(e=>{let{dataCategory:n,field:i}=e,r=i.data_categories||[],o={...i,data_categories:[...r,n]},a=S.indexOf(z),s=z.fields.indexOf(i);t((0,V._n)(w,o,a,s))},[z,S,w,t]),R=(0,l.useCallback)(e=>{var n;let{dataCategory:i,field:r}=e,o={...r,data_categories:null===(n=r.data_categories)||void 0===n?void 0:n.filter(e=>e!==i)},a=S.indexOf(z),s=z.fields.indexOf(r);t((0,V._n)(w,o,a,s))},[z,S,w,t]),D=(0,l.useMemo)(()=>[k.accessor(e=>e.name,{id:"name",cell:e=>(0,i.jsx)(v.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(v.Rr,{value:"Field Name",...e}),size:180}),k.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,i.jsx)(v.A4,{value:e.getValue()}):(0,i.jsx)(v.G3,{value:void 0}),header:e=>(0,i.jsx)(v.Rr,{value:"Type",...e}),size:80}),k.accessor(e=>e.description,{id:"description",cell:e=>(0,i.jsx)(v.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(v.Rr,{value:"Description",...e}),size:300}),k.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{let t=e.row.original;return(0,i.jsx)(j,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>A({dataCategory:e,field:t}),onRemoveTaxonomy:e=>R({dataCategory:e,field:t})})},header:e=>(0,i.jsx)(v.Rr,{value:"Data categories",...e}),size:300}),k.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,n=t.original;return(0,i.jsx)(a.Ugi,{spacing:0,"data-testid":"field-".concat(n.name),children:(0,i.jsx)(a.zxk,{variant:"outline",size:"xs",leftIcon:(0,i.jsx)(a.dY8,{}),onClick:()=>{W(n),L(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[A,R]),I=(0,l.useMemo)(()=>H?T.filter(e=>e.name.toLowerCase().includes(H.toLowerCase())):T,[T,H]),N=(0,o.b7)({getCoreRowModel:(0,r.sC)(),getFilteredRowModel:(0,r.vL)(),getSortedRowModel:(0,r.tj)(),columns:D,data:I}),[E,L]=(0,l.useState)(!1),[P,W]=(0,l.useState)();return(0,i.jsxs)(f.Z,{title:"Dataset - ".concat(h),mainProps:{paddingTop:0},children:[(0,i.jsx)(p.Z,{breadcrumbs:[{title:"Datasets"}],children:(0,i.jsx)(y.Z,{breadcrumbs:[{title:"All datasets",icon:(0,i.jsx)(d.V,{boxSize:4}),link:x.$m},{title:h,link:{pathname:x.o5,query:{id:h}},icon:(0,i.jsx)(c.l,{boxSize:5})},{title:C,icon:(0,i.jsx)(u.$,{boxSize:5})}]})}),_?(0,i.jsx)(v.I4,{rowHeight:36,numRows:15}):(0,i.jsxs)(a.xuv,{"data-testid":"fields-table",children:[(0,i.jsx)(v.Q$,{children:(0,i.jsx)(v.HO,{globalFilter:H,setGlobalFilter:M,placeholder:"Search",testid:"fields-search"})}),(0,i.jsx)(v.ZK,{tableInstance:N,emptyTableNotice:(0,i.jsx)(O,{})}),(0,i.jsx)(Z,{isOpen:E,onClose:()=>{L(!1),W(void 0)},field:P,dataset:w,collection:z})]})]})}}},function(e){e.O(0,[6451,4671,2866,9278,2850,7096,2888,9774,179],function(){return e(e.s=69594)}),_N_E=e.O()}]);