"use strict";(self.webpackChunk_datalayer_core=self.webpackChunk_datalayer_core||[]).push([[7706],{77706:(e,l,s)=>{s.r(l),s.d(l,{CellPublic:()=>g,default:()=>C});var n=s(4565),r=s(89456),a=s(17168),c=s(41237),i=s(36088),t=s(66578),d=s(83773),o=s(43429),h=s(52333),u=s(20398),x=s(48968),j=s(34441),f=s(1990),Z=s(13707),m=s(91899),y=s(78584),p=s(51788);const g=()=>{const{cellId:e}=(0,a.UO)();if(!e)return(0,n.jsx)(n.Fragment,{});const[l,s]=(0,r.useState)(!1),{enqueueToast:g}=(0,m.pm)(),{defaultKernel:C}=(0,f.W$)(),{getCell:k,refreshCell:w,cloneCell:b}=(0,m.YT)(),$=(0,y.qX)(),v=$.iam().user,z=($.layout().organization,$.layout().space),_=(0,m.s0)(),E=(0,c.N)(),F=$.cell().cell,P=F?F.outputCdnUrl?F.outputCdnUrl:F.outputData:p.D_;(0,r.useEffect)((()=>{F&&F.id===e&&s(!0),l||w(e).then((l=>{if(l.success){const l=k(e);l?$.cell().update(l):_("/")}})).finally((()=>{s(!0)}))}),[]);const T=(0,r.useCallback)((async l=>{E({title:"Are you sure?",content:"Please confirm you want to clone this cell in your private library."}).then((l=>{l&&b(e).then((e=>{e.success&&(g(e.message,{variant:"success"}),$.layout().triggerItemsRefresh(),_(`/${v?.handle}/library/cells`))}))}))}),[E,F]);return F&&l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{children:(0,n.jsxs)(t.Z,{display:"flex",children:[(0,n.jsx)(t.Z,{flex:1,children:(0,n.jsx)(d.Z,{sx:{fontSize:3},children:"Public cell"})}),(0,n.jsx)(t.Z,{children:(0,n.jsxs)(o.Z,{children:[F&&v?.handle===F.owner.handle&&(0,n.jsx)(h.r,{variant:"default",size:"small",onClick:()=>_(`/${F.organization?.handle??F.owner?.handle}/${F.space?.handle}/cell/${F.id}`),children:"Edit"}),v&&z&&(0,n.jsx)(h.r,{variant:"default",size:"small",leadingVisual:j.jcu,onClick:T,children:"Clone"})]})})]})}),(0,n.jsxs)(t.Z,{children:[(0,n.jsxs)(t.Z,{children:[(0,n.jsx)(t.Z,{mb:3}),(0,n.jsxs)(t.Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[(0,n.jsxs)(t.Z,{children:[(0,n.jsx)(t.Z,{children:(0,n.jsx)(u.Z,{children:F.name})}),(0,n.jsx)(t.Z,{children:(0,n.jsxs)(u.Z,{children:["By ",F.owner.displayName," ",(0,n.jsxs)(x.Z,{href:"",onClick:e=>_(`/${F.owner.handle}`,e),children:["@",F.owner.handle]})]})}),(0,n.jsx)(t.Z,{mt:5,children:(0,n.jsx)(u.Z,{children:F.description})})]}),(0,n.jsx)(t.Z,{ml:3,children:(0,n.jsx)("img",{src:P,style:{maxHeight:400}})})]})]}),(0,n.jsx)(t.Z,{children:C&&(0,n.jsx)(Z.r,{showEditor:!0,autoRun:!0,kernel:C,code:F.source,id:"cell"})})]})]}):(0,n.jsx)(n.Fragment,{})},C=g}}]);