(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-405b6022"],{"07ac":function(t,e,a){var o=a("23e7"),r=a("6f53").values;o({target:"Object",stat:!0},{values:function(t){return r(t)}})},3410:function(t,e,a){var o=a("23e7"),r=a("d039"),i=a("7b0b"),n=a("e163"),s=a("e177"),c=r((function(){n(1)}));o({target:"Object",stat:!0,forced:c,sham:!s},{getPrototypeOf:function(t){return n(i(t))}})},"6f53":function(t,e,a){var o=a("83ab"),r=a("df75"),i=a("fc6a"),n=a("d1e7").f,s=function(t){return function(e){var a,s=i(e),c=r(s),l=c.length,p=0,h=[];while(l>p)a=c[p++],o&&!n.call(s,a)||h.push(t?[a,s[a]]:s[a]);return h}};t.exports={entries:s(!0),values:s(!1)}},9485:function(t,e,a){t.exports=a.p+"static/img/nodata.8290bed9.png"},a15b:function(t,e,a){"use strict";var o=a("23e7"),r=a("44ad"),i=a("fc6a"),n=a("a640"),s=[].join,c=r!=Object,l=n("join",",");o({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var o=a("23e7"),r=a("23cb"),i=a("a691"),n=a("50c4"),s=a("7b0b"),c=a("65f0"),l=a("8418"),p=a("1dde"),h=a("ae40"),u=p("splice"),d=h("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u||!d},{splice:function(t,e){var a,o,p,h,u,d,g=s(this),O=n(g.length),y=r(t,O),w=arguments.length;if(0===w?a=o=0:1===w?(a=0,o=O-y):(a=w-2,o=m(f(i(e),0),O-y)),O+a-o>v)throw TypeError(b);for(p=c(g,o),h=0;h<o;h++)u=y+h,u in g&&l(p,h,g[u]);if(p.length=o,a<o){for(h=y;h<O-o;h++)u=h+o,d=h+a,u in g?g[d]=g[u]:delete g[d];for(h=O;h>O-o+a;h--)delete g[h-1]}else if(a>o)for(h=O-o;h>y;h--)u=h+o-1,d=h+a-1,u in g?g[d]=g[u]:delete g[d];for(h=0;h<a;h++)g[h+y]=arguments[h+2];return g.length=O-o+a,p}})},b0c0:function(t,e,a){var o=a("83ab"),r=a("9bf2").f,i=Function.prototype,n=i.toString,s=/^\s*function ([^ (]*)/,c="name";o&&!(c in i)&&r(i,c,{configurable:!0,get:function(){try{return n.call(this).match(s)[1]}catch(t){return""}}})},bae7:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"operator-shape-step"},[o("div",{staticClass:"shape-step"},[o("span",{staticClass:"shape-step-title"},[t._v(" "+t._s(t.$t("profiling.operatorShapeDetail"))+" "),o("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right-end"}},[o("div",{staticClass:"tooltip-container",attrs:{slot:"content"},slot:"content"},[o("div",[t._v(t._s(t.$t("profiling.operatorShapeTip")))])]),o("span",{staticClass:"el-icon-info"})])],1)]),o("div",{staticClass:"operator-shape-option"},[o("div",{staticClass:"operator-shape-select"},[o("span",{staticClass:"operator-filter-title"},[t._v(t._s(t.$t("profiling.operatorFilterTitle")))]),o("el-select",{staticClass:"operator-detail-select",attrs:{"collapse-tags":!0,multiple:"",filterable:"",placeholder:t.selectTip},on:{"remove-tag":t.operatorRemove},model:{value:t.topOperatorValue,callback:function(e){t.topOperatorValue=e},expression:"topOperatorValue"}},t._l(t.topOperatorArr,(function(e,a){return o("el-option",{key:a,attrs:{label:e.name.length>20?e.name.substring(0,20)+"...":e.name,disabled:"",value:e.name}},[o("el-checkbox",{key:e.name,attrs:{title:e.name,disabled:t.checkSig},on:{change:function(a){return t.operatorChange(e.name)}},model:{value:e.check,callback:function(a){t.$set(e,"check",a)},expression:"item.check"}},[t._v(" "+t._s(e.name.length>20?e.name.substring(0,20)+"...":e.name)+" ")])],1)})),1)],1)]),o("div",{staticClass:"operator-shape-detail"},[o("div",{staticClass:"operator-shape-title"},[t._v(t._s(t.$t("profiling.operatorShapeTitle")))]),o("div",{staticClass:"operator-shape-chart",attrs:{id:"operatorShapeDetailChart"}}),t.svg.noData?o("div",{staticClass:"image-noData"},[o("div",[o("img",{attrs:{src:a("9485"),alt:""}}),o("p",{directives:[{name:"show",rawName:"v-show",value:t.svg.noData,expression:"svg.noData"}]},[t._v(t._s(t.$t("public.noData")))])])]):t._e()]),t.showDialogModel?o("div",{staticClass:"operator-shape-dialog"},[o("el-dialog",{staticClass:"details-data-list",attrs:{title:t.operatorShapeTitle,visible:t.showDialogModel,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(e){t.showDialogModel=e}}},[o("el-table",{attrs:{data:t.modelShapeData,"row-key":"id",height:"300",lazy:"","tooltip-effect":"light"}},[o("el-table-column",{attrs:{property:"name",label:"OperatorName",width:"200"}}),o("el-table-column",{attrs:{property:"step",label:"Step",width:"100"}}),o("el-table-column",{attrs:{property:"value",label:"OperatorShape"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.value)+" ")]}}],null,!1,4272015574)})],1)],1)],1):t._e()])},r=[],i=(a("99af"),a("a15b"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("3410"),a("b64b"),a("d3b7"),a("07ac"),a("159b"),a("9fac")),n=a("3778"),s=a("2dd7"),c={props:{rankID:String,showHelp:Boolean},watch:function(){this.showHelp||this.chartObj.resize()},data:function(){return{trainInfo:{id:this.$route.query.id,path:this.$route.query.path,dir:this.$route.query.dir},operatorOptions:{dataZoom:[{type:"slider",show:!0,start:0,end:100}],tooltip:{trigger:"axis",formatter:null,confine:!0},legend:{right:70,top:8,data:[],padding:[0,0,0,120],type:"scroll"},color:s["a"].dynamicLineColor,xAxis:{type:"category",name:"step",data:[]},yAxis:{type:"value",name:this.$t("profiling.timeConsume")+"(s)"},series:[]},topOperatorValue:[],topOperatorArr:[],showDialogModel:!1,modelShapeData:null,svg:{noData:!1},selectTip:this.$t("public.select"),operatorShapeTitle:this.$t("profiling.operatorShapeTitle"),chartObj:null,checkSig:!1}},created:function(){Object.getPrototypeOf(this.$options.components).ElSelect.options.methods.handleFocus=function(t){}},mounted:function(){var t=this;this.$nextTick((function(){t.getOperatorShape(),window.addEventListener("resize",t.resizeCallback,!1),setTimeout((function(){t.$bus.$on("collapse",t.resizeEchart)}),300)}))},methods:{getOperatorShape:function(){var t=this,e={dir:this.trainInfo.path,device_id:this.rankID},a=[],o=[],r=[];n["a"].queryDynamicShape(e).then((function(e){if(e&&e.data){t.svg.noData=!1;var n=e.data,s=n.op_type,c=0;Object.keys(s).forEach((function(t){var e=n[t];e.forEach((function(t){var e=Object.keys(t).length>0?Object.keys(t)[0]:null,i=Object.values(t).length>0?Object.values(t)[0].op_exe_time:[],n=Object.values(t).length>0?Object.values(t)[0].op_shape:[],s=!1,l=null;if(c<3){s=!0;var p={type:"line",name:e,data:i,smooth:!0,showSymbol:!1};a.push(p),o.push(e),l={name:e,check:s,data:i,detail:n}}else s=!1,l={name:e,check:s,data:i,detail:n};c++,r.push(l)}))}))}t.operatorOptions.xAxis.data=a[0].data.map((function(t,e){return e+1})),t.operatorOptions.series=a,t.operatorOptions.legend.data=o,t.topOperatorArr=r,t.chartObj=i["a"].init(document.getElementById("operatorShapeDetailChart"),i["b"]),t.operatorOptions.tooltip.formatter=function(e){return t.formatChartTip(e)},t.$nextTick((function(){t.chartObj.setOption(t.operatorOptions,!0),t.chartObj.on("click",t.showOperatorDetail),t.addDefaultShape(t.topOperatorArr)}))})).catch((function(){t.svg.noData=!0}))},formatChartTip:function(t){var e=[];if(t&&t.length){s["a"].dynamicLineColor;var a=t[0].dataIndex+1;e.push("step: ".concat(a)),t.forEach((function(t,a){e.push('<span class="define-chart-tip" style="background-color:'.concat(t.color,';"></span>')+"".concat(t.seriesName,': <span style="margin: 0 6px;">').concat(t.data,"</span>"))}))}return e.join("<br>")},operatorRemove:function(t){var e=this;this.topOperatorArr.forEach((function(a){a.name==t&&(a.check=!a.check,e.drawChart())})),this.topOperatorValue.length<=9&&(this.checkSig=!1)},addDefaultShape:function(t){var e=this,a=t.slice(0,3);a.forEach((function(t){t.check&&e.topOperatorValue.push(t.name)}))},operatorChange:function(t){var e=this;-1==this.topOperatorValue.indexOf(t)?this.topOperatorValue.push(t):this.topOperatorValue.forEach((function(a){a==t&&e.topOperatorValue.splice(e.topOperatorValue.indexOf(t),1)})),this.drawChart(),this.topOperatorValue.length>9&&(this.checkSig=!0),this.resizeEchart()},drawChart:function(){var t=this,e=[],a=[];this.topOperatorArr.forEach((function(t){var o=t.check;if(o){var r={type:"line",name:t.name,data:t.data,smooth:!0,showSymbol:!1};e.push(r),a.push(t.name)}})),this.operatorOptions.series=e,this.operatorOptions.legend.data=a,this.chartObj=i["a"].init(document.getElementById("operatorShapeDetailChart"),i["b"]),this.$nextTick((function(){t.chartObj.setOption(t.operatorOptions,!0)}))},showOperatorDetail:function(t){var e=this;this.showDialogModel=!this.showDialogModel;var a=t.dataIndex;this.modelShapeData=[],this.topOperatorArr.forEach((function(t){if(t.check){var o=t.detail[a],r=t.name,i=a+1;e.modelShapeData.push({name:r,step:i,value:o})}}))},resizeCallback:function(){this.chartObj&&this.chartObj.resize()},resizeEchart:function(){var t=this;this.chartObj&&setTimeout((function(){t.chartObj.resize()}),100)}},destroyed:function(){window.removeEventListener("resize",this.resizeCallback),this.$bus.$off("collapse"),this.chartObj&&(this.chartObj.off("mouseover"),this.chartObj.off("mouseout"))}},l=c,p=(a("f6e9"),a("2877")),h=Object(p["a"])(l,o,r,!1,null,null,null);e["default"]=h.exports},d81d:function(t,e,a){"use strict";var o=a("23e7"),r=a("b727").map,i=a("1dde"),n=a("ae40"),s=i("map"),c=n("map");o({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},de45:function(t,e,a){},f6e9:function(t,e,a){"use strict";a("de45")},fb6a:function(t,e,a){"use strict";var o=a("23e7"),r=a("861d"),i=a("e8b5"),n=a("23cb"),s=a("50c4"),c=a("fc6a"),l=a("8418"),p=a("b622"),h=a("1dde"),u=a("ae40"),d=h("slice"),f=u("slice",{ACCESSORS:!0,0:0,1:2}),m=p("species"),v=[].slice,b=Math.max;o({target:"Array",proto:!0,forced:!d||!f},{slice:function(t,e){var a,o,p,h=c(this),u=s(h.length),d=n(t,u),f=n(void 0===e?u:e,u);if(i(h)&&(a=h.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?r(a)&&(a=a[m],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return v.call(h,d,f);for(o=new(void 0===a?Array:a)(b(f-d,0)),p=0;d<f;d++,p++)d in h&&l(o,p,h[d]);return o.length=p,o}})}}]);