(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41e2a106"],{"0c69":function(t,e,a){var n={"./0/repeat-dataset.svg":"e5a4","./1/repeat-dataset.svg":"a294"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="0c69"},1300:function(t,e,a){t.exports=a.p+"static/img/map-dataset.00aaf154.svg"},"2b98":function(t,e,a){t.exports=a.p+"static/img/shuffle-dataset.328078ac.svg"},"30d6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMyMzY4N0NDQUQyMzExRTk5OEVEQzJBOEUzMkNBMTQyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMyMzY4N0NEQUQyMzExRTk5OEVEQzJBOEUzMkNBMTQyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzIzNjg3Q0FBRDIzMTFFOTk4RURDMkE4RTMyQ0ExNDIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzIzNjg3Q0JBRDIzMTFFOTk4RURDMkE4RTMyQ0ExNDIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz60vH4DAAAAw0lEQVR42mL8//8/AyWAkVIDWGbNmkWRAUwMFAKYAVeAeAMQcxFQzwbEK4H4DLoBIAF/IN4OxHw4NIMM3wTEYUB8Cd2AZCCeAcR2QLwXiIXRNPNCDXcHYlCgpaAb8BeIs4C4C4hNgPggEEtC5QSBeA/U8D4gzgDif9gCERSf5UBcA8TaQHwYiM2AeB+UbgbiYqg6RDRi8WsrEH8C4olAfBIqVg51HdHROBmI44H4LRBn49KMywUwsBiKaZuUh4EBAAEGAI/gMqWZGi6/AAAAAElFTkSuQmCC"},3778:function(t,e,a){"use strict";a("99af"),a("d3b7"),a("159b");var n=a("f756");e["a"]={queryDatasetGraph:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datasets/dataset_graph",params:t})},queryLineagesData:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/lineagemgr/lineages",data:t.body})},putLineagesData:function(t){return Object(n["b"])({method:"put",url:"v1/mindinsight/lineagemgr/lineages?train_id="+Object(n["c"])(t.train_id),data:t.body})},queryTargetsData:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/optimizer/targets/search",data:t.body})},querySummaryList:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/train-jobs",params:t,headers:{ignoreError:e}})},getScalarsSample:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/scalar/metadata",params:t,headers:{ignoreError:!0}})},getTensorsSample:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/tensors",params:t,headers:{ignoreError:!0}})},queryGraphData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/nodes",params:t})},searchNodesNames:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/nodes/names",params:t})},querySingleNode:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/single-node",params:t})},getSingleTrainJob:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/single-job",params:t,headers:{ignoreError:e}})},trainJobsCaches:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/datavisual/train-job-caches",data:t})},getSummarySample:function(t){var e=t.train_id,a="";return e.forEach((function(t){t&&(a+="train_id=".concat(Object(n["c"])(t),"&"))})),a+="tag=".concat(Object(n["c"])(t.tag)),Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/scalars?".concat(a)})},getImageMetadatas:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/image/metadata",params:t,headers:{ignoreError:!0}})},getImageData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/image/single-image",params:t,headers:{ignoreError:!0}})},getDatavisualPlugins:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/plugins",params:t})},getHistogramData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/histograms",params:t})},getProfilerDeviceData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/devices",params:t})},getProfilerOpData:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/ops/search",params:t.params,data:t.body,headers:{ignoreError:!0}})},queryDataOfProfileHelper:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/summary/propose",params:t})},queryDataOfProfileClusterHelper:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/summary/cluster-propose",params:t,timeout:24e4})},queryTrainingTrace:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/training-trace/graph",params:t,headers:{ignoreError:!0}})},targetTimeInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/training-trace/target-time-info",params:t,headers:{ignoreError:!0}})},queryTimeline:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/timeline",params:t,headers:{ignoreError:!0}})},queryTimelineInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/timeline-summary",params:t,headers:{ignoreError:!0}})},queryMsprofTimelineOption:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/msprof_timeline_option",params:t,headers:{ignoreError:!0}})},queryMsprofTimeline:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/msprof_timeline",params:t,headers:{ignoreError:!0}})},queryOpQueue:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/minddata-pipeline/op-queue",params:t.params,data:t.body,headers:{ignoreError:!0}})},queryQueue:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/minddata-pipeline/queue",params:t,headers:{ignoreError:!0}})},queryProcessSummary:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/process_summary",params:t,headers:{ignoreError:!0}})},queueInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/queue_info",params:t,headers:{ignoreError:!0}})},minddataOp:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/minddata_op",params:t,headers:{ignoreError:!0}})},getGraphData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/parallel-strategy/graphs",params:t,headers:{ignoreError:!0},timeout:6e4})},getSession:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions",data:t})},deleteSession:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(t,"/delete")})},checkSessions:function(){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions"})},pollData:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/poll-data"),params:t,headers:{ignoreError:!0},timeout:0})},retrieve:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/retrieve"),data:t})},createWatchpoint:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/create-watchpoint"),data:t})},updateWatchpoint:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/update-watchpoint"),data:t})},deleteWatchpoint:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/delete-watchpoint"),data:t})},control:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/control"),data:t})},search:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/search"),params:t})},retrieveNodeByBfs:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/retrieve_node_by_bfs",params:t})},tensorComparisons:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-comparisons"),params:t})},tensors:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensors"),params:t})},retrieveTensorHistory:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-history"),data:t})},queryConditions:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(t,"/condition-collections")})},recheckWatchPoints:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(t,"/recheck")})},searchWatchpointHits:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/search-watchpoint-hits"),data:t})},queryStackList:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/stacks"),params:t})},loadTensor:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-files/load"),data:t})},getGraphRuns:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(t,"/ranks/").concat(e,"/graph-runs")})},getExplainList:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/explainer/explain-jobs",params:t})},queryTrainInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/explainer/explain-job",params:t})},queryPageInfo:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/explainer/saliency",data:t})},getEvaluation:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/explainer/evaluation",params:t})},queryHOCData:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/explainer/hoc",data:t})},tensorHitsData:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-hits"),params:t})},getTensorGraphData:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-graphs"),params:t})},getCpuUtilization:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/minddata-cpu-utilization-summary",params:t.params,data:t.body})},setRecommendWatchPoints:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/set-recommended-watch-points"),data:t})},queryMemorySummary:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/memory-summary",params:t})},queryMemoryGraphics:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/memory-graphics",params:t})},queryMemoryBreakdowns:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/memory-breakdowns",params:t})},getClusterInfo:function(t){return Object(n["b"])({method:"post",params:t.params,data:t.body,url:"v1/mindinsight/profile/cluster-step-trace-summary"})},getCommInfo:function(t){return Object(n["b"])({method:"post",params:t.params,data:t.body,url:"v1/mindinsight/profile/search-cluster-communication"})},getLinkInfo:function(t){return Object(n["b"])({method:"post",params:t.params,data:t.body,url:"v1/mindinsight/profile/search-cluster-link"})},getClusterPeakMemory:function(t){return Object(n["b"])({method:"get",params:t,url:"v1/mindinsight/profile/cluster-peak-memory"})},getFlopsSummary:function(t){return Object(n["b"])({method:"get",params:t,url:"v1/mindinsight/profile/flops-summary"})},getClusterFlops:function(t){return Object(n["b"])({method:"get",params:t,url:"v1/mindinsight/profile/cluster-flops"})},getFlopsScope:function(t){return Object(n["b"])({method:"get",params:t,url:"v1/mindinsight/profile/flops-scope"})},queryLossGraph:function(t){var e=t.train_id,a="";return Array.isArray(e)?e.forEach((function(t){t&&(a+="train_id=".concat(Object(n["c"])(t),"&"))})):a+="train_id=".concat(Object(n["c"])(e),"&"),a+="type=".concat(t.type),(t.metadata||!1===t.metadata)&&(a+="&metadata=".concat(t.metadata)),(t.interval_id||0===t.interval_id)&&(a+="&interval_id=".concat(t.interval_id)),Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/landscape/landscapes?".concat(a)})},queryEpochIntervals:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/landscape/intervals",params:t})},queryDynamicShape:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/dynamic-shape-detail",data:t,headers:{ignoreError:!0}})},queryAllGraphNodesData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/nodes/all",params:t})},getTimeLineData:function(t,e,a){var i={train_id:t,step:e,device_type:"ascend"};return null!=a&&(i["device_list"]=a),Object(n["b"])({method:"get",url:"v1/mindinsight/profile/marey-graph/timeline",params:i,headers:{ignoreError:!0},timeout:24e4})},getOverviewTime:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/marey-graph/overview-time",params:{train_id:t,device_type:"ascend"},headers:{ignoreError:!0},timeout:24e4})},getCommunicationGraph:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/communication-data",params:{train_id:t},headers:{ignoreError:!0},timeout:24e4})},getFLOPsData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/marey-graph/flops-data",params:{train_id:t},headers:{ignoreError:!0},timeout:24e4})},getMemoryData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/marey-graph/memory-data",params:{train_id:t,device_type:"ascend"},headers:{ignoreError:!0},timeout:24e4})},queryDynamicShapeGPU:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/dynamic-shape-detail",params:t.params,data:t.body,headers:{ignoreError:!0}})},getProfilerInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/profile_info",params:t})}}},"379c":function(t,e,a){var n={"./0/creat-dataset.svg":"9f1b","./1/creat-dataset.svg":"d674"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="379c"},"3d78":function(t,e,a){t.exports=a.p+"static/img/batch-img.9f7f171d.svg"},4702:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cl-data-map-manage"},[n("div",{staticClass:"data-map-p32"},[n("div",{staticClass:"cl-title cl-data-map-title"},[n("div",{staticClass:"cl-title-left"},[t._v(t._s(t.$t("dataMap.titleText"))+" "),n("div",{staticClass:"path-message"},[n("span",[t._v(t._s(t.$t("symbols.leftbracket")))]),n("span",[t._v(t._s(t.$t("trainingDashboard.summaryDirPath")))]),n("span",[t._v(t._s(t.summaryPath))]),n("span",[t._v(t._s(t.$t("symbols.rightbracket")))])])]),n("div",{staticClass:"cl-title-right"},[n("div",{staticClass:"cl-close-btn",on:{click:t.jumpToTrainDashboard}},[n("img",{attrs:{src:a("4d06")}})])])]),n("div",{staticClass:"cl-content"},[n("div",{attrs:{id:"data-maps"}},[n("div",{staticClass:"cl-data-map",class:t.fullScreen?"full-screen":""},[n("div",{staticClass:"data-map-container",class:t.rightShow?"":"all"},[n("div",{attrs:{id:"graph"}}),t.noData?n("div",{staticClass:"image-noData"},[n("div",[n("img",{attrs:{src:a("9485"),alt:""}})]),n("div",{staticClass:"noData-text"},[t._v(t._s(t.$t("public.noData")))])]):t._e(),n("div",{staticClass:"full-screen-button",attrs:{title:t.$t("graph.fullScreen")},on:{click:function(e){t.fullScreen=!t.fullScreen}}}),n("div",{staticClass:"fit-screen",attrs:{title:t.$t("graph.fitScreen")},on:{click:function(e){return t.fit()}}}),n("div",{staticClass:"download-button",attrs:{title:t.$t("graph.downloadPic")},on:{click:t.downLoadSVG}})]),n("div",{class:t.rightShow?"":"right-hide",attrs:{id:"sidebar"}},[n("div",{staticClass:"toggle-right",class:[t.rightShow?"":"toggle-left","toggle-"+t.themeIndex+"-btn"],on:{click:t.toggleRight}}),n("div",{staticClass:"node-info",class:t.showLegend?"node-info-con node-info-container":"node-info-con node-info-container-long"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("graph.nodeInfo")))]),t.selectedNode&&t.selectedNode.length?n("div",{staticClass:"node-info-list"},t._l(t.selectedNode,(function(e){return n("div",{key:e.key,staticClass:"item"},[n("div",{staticClass:"label"},[t._v(t._s(e.key))]),n("div",{staticClass:"value"},[t._v(t._s(e.value))])])})),0):t._e()]),t.fullScreen?t._e():n("div",{staticClass:"legend"},[n("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("graph.legend"))+" "),n("img",{directives:[{name:"show",rawName:"v-show",value:!t.showLegend,expression:"!showLegend"}],attrs:{src:a("e08c"),alt:""},on:{click:t.foldLegend}}),n("img",{directives:[{name:"show",rawName:"v-show",value:t.showLegend,expression:"showLegend"}],attrs:{src:a("30d6"),alt:""},on:{click:t.foldLegend}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showLegend,expression:"showLegend"}],staticClass:"legend-content"},[n("div",{staticClass:"legend-item"},[n("div",{staticClass:"pic"},[n("img",{attrs:{src:a("379c")("./"+t.themeIndex+"/creat-dataset.svg"),alt:""}})]),n("div",[t._v("Create")])]),n("div",{staticClass:"legend-item"},[n("div",{staticClass:"pic"},[n("img",{attrs:{src:a("6670")("./"+t.themeIndex+"/map-dataset.svg"),alt:""}})]),n("div",[t._v("Map")])]),n("div",{staticClass:"legend-item"},[n("div",{staticClass:"pic"},[n("img",{attrs:{src:a("e057")("./"+t.themeIndex+"/operator-node.svg"),alt:""}})]),n("div",[t._v("Operator")])]),n("div",{staticClass:"legend-item"},[n("div",{staticClass:"pic"},[n("img",{attrs:{src:a("dc65")("./"+t.themeIndex+"/shuffle-dataset.svg"),alt:""}})]),n("div",[t._v("Shuffle")])]),n("div",{staticClass:"legend-item"},[n("div",{staticClass:"pic"},[n("img",{attrs:{src:a("893d")("./"+t.themeIndex+"/batch-img.svg"),alt:""}})]),n("div",[t._v("Batch")])]),n("div",{staticClass:"legend-item"},[n("div",{staticClass:"pic"},[n("img",{attrs:{src:a("0c69")("./"+t.themeIndex+"/repeat-dataset.svg"),alt:""}})]),n("div",[t._v("Repeat")])])])])])])])])])])},i=[],r=(a("99af"),a("caad"),a("a15b"),a("d81d"),a("fb6a"),a("e9c4"),a("b64b"),a("d3b7"),a("ac1f"),a("466d"),a("5319"),a("498a"),a("159b"),a("3778")),s=a("2dd7"),o=a("5698"),c=a("0165"),d=(a("6d21"),{select:o["select"],selectAll:o["selectAll"],zoom:o["zoom"]}),u={data:function(){return{allGraphData:{},graphviz:null,totalMemory:33554432,scaleRange:[1e-4,1e4],rightShow:!0,showLegend:!0,fullScreen:!1,trainJobID:"",selectedNode:[],noData:!1,summaryPath:this.$route.query.summaryPath,themeIndex:this.$store.state.themeIndex}},mounted:function(){var t=this;if(!this.$route.query||!this.$route.query.train_id)return this.trainJobID="",this.$message.error(this.$t("trainingDashboard.invalidId")),void(document.title="".concat(this.$t("trainingDashboard.dataMap"),"-MindInsight"));this.trainJobID=this.$route.query.train_id,document.title="".concat(this.trainJobID,"-").concat(this.$t("trainingDashboard.dataMap"),"-MindInsight"),this.$nextTick((function(){t.queryGraphData()}))},destroyed:function(){},methods:{queryGraphData:function(){var t=this,e={train_id:this.trainJobID};r["a"].queryDatasetGraph(e).then((function(e){if(e&&e.data&&e.data.dataset_graph){var a=JSON.parse(JSON.stringify(e.data.dataset_graph));if(t.dealResponseData(a),Object.keys(t.allGraphData).length){t.noData=!1;var n=t.packageGraphData();t.initGraph(n)}else t.noData=!0}}))},dealResponseData:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t){var i="".concat(a?a+"/":"").concat(t.op_type||"","_").concat(n),r={key:i,id:""};Object.keys(t).forEach((function(a){"children"!==a?r[a]=JSON.parse(JSON.stringify(t[a])):(r.children=[],t.children&&t.children.length&&t.children.forEach((function(t,a){r.children.push("".concat(r.key,"/").concat(t.op_type,"_").concat(a)),e.dealResponseData(t,r.key,a)})))})),this.allGraphData[i]=r}},packageGraphData:function(){var t=this,e=["BatchDataset","ShuffleDataset","RepeatDataset","MapDataset","Batch","Shuffle","Repeat","Map"],a=["Map","MapDataset"],n="",i="";Object.keys(this.allGraphData).forEach((function(i){var r=t.allGraphData[i];a.includes(r.op_type)?n+=t.packageSubGraph(i):(r.id=i,n+="<".concat(r.key,'>[id="').concat(r.key,'";label="').concat(r.op_type,'";')+"class=".concat(e.includes(r.op_type)?r.op_type.replace("Dataset",""):"Create",';shape=rect;fillcolor="#9cc3e5";];'))})),Object.keys(this.allGraphData).forEach((function(e){var n=t.allGraphData[e];n.children.forEach((function(e){var r=t.allGraphData[e];i+="<".concat(r.id,">-><").concat(n.id,">[").concat(a.includes(r.op_type)?"ltail=<cluster_".concat(r.key,">;"):"").concat(a.includes(n.op_type)?"lhead=<cluster_".concat(n.key,">;"):"","];")}))}));var r='node[style="filled";fontsize="10px"];edge[fontsize="6px";];';return"digraph {compound=true;rankdir=LR;".concat(r).concat(n).concat(i,"}")},packageSubGraph:function(t){var e=this.allGraphData[t],a="";if(e.operations&&e.operations.length){var n="";e.operations.forEach((function(t,a){var i="".concat(e.key,"/").concat(t.tensor_op_name,"_").concat(a);t.key=i,n+="<".concat(i,'>[id="').concat(i,'";class=Operator;label="').concat(t.tensor_op_name,'";fillcolor="#c5e0b3"];'),e.id||(e.id=i)})),a+="subgraph <cluster_".concat(t,'>{style="filled";id="').concat(t,'";')+'label="'.concat(e.op_type,'";fillcolor="#9cc3e5";').concat(n,"};")}return a},initGraph:function(t){this.graphviz=d.select("#graph").graphviz({useWorker:!1,totalMemory:this.totalMemory}).zoomScaleExtent(this.scaleRange).dot(t).attributer(this.attributer).render(this.afterInitGraph)},afterInitGraph:function(){var t=this;setTimeout((function(){t.graphviz&&(t.graphviz._data=null,t.graphviz._dictionary=null,t.graphviz=null)}),100),d.select("#graph").selectAll("title").remove(),this.startApp()},attributer:function(t,e,a){if("svg"===t.tag){var n="100%",i="100%";t.attributes.width=n,t.attributes.height=i}},startApp:function(){var t=this;this.initZooming();var e=d.selectAll("g.node, g.cluster");e.on("click",(function(a,n,i){t.selectNodeInfo(a);var r=i[n];e.classed("selected",!1),d.select('g[id="'.concat(r.id,'"]')).classed("selected",!0)}))},initZooming:function(){var t=this,e=document.querySelector("#graph svg"),a=e.getBoundingClientRect(),n=document.querySelector("#graph #graph0"),i=n.getBBox(),r=n.getBoundingClientRect(),s={},o=Math.min(a.width/2/r.width,a.height/2/r.height),u=4,l=50,g={start:{x:0,y:0},end:{x:0,y:0}},h=d.zoom().on("start",(function(){var t=c["c"].sourceEvent;g.start.x=t.x,g.start.y=t.y})).on("zoom",(function(){var e=c["c"].sourceEvent,r=t.getTransformData(n);Object.keys(s).length||(s={x:r.translate[0],y:r.translate[1],k:r.scale[0]});var d="",h={},m=r.scale[0],p=n.getBoundingClientRect(),b=i.width/p.width;if("mousemove"===e.type){g.end.x=e.x,g.end.y=e.y;var f=g.end.x-g.start.x,v=g.end.y-g.start.y,y=Math.max(u/b/m,l);p.left+y+f>=a.left+a.width&&(f=Math.min(f,0)),p.left+p.width-y+f<=a.left&&(f=Math.max(f,0)),p.top+y+v>=a.top+a.height&&(v=Math.min(v,0)),p.top+p.height-y+v<=a.top&&(v=Math.max(v,0)),h={x:f*b*m,y:v*b*m},g.start.x=g.end.x,g.start.y=g.end.y}else if("wheel"===e.type){var O=-e.deltaY,A=1.2;m=O>0?r.scale[0]*A:r.scale[0]/A,m=Math.max(t.scaleRange[0],m,o),m=Math.min(t.scaleRange[1],m),h={x:(p.x+u/b-e.x)*b*(m-r.scale[0]),y:(p.bottom-u/b-e.y)*b*(m-r.scale[0])}}s={x:r.translate[0]+h.x,y:r.translate[1]+h.y,k:m},d="translate(".concat(s.x,",").concat(s.y,") scale(").concat(s.k,")"),n.setAttribute("transform",d),e.stopPropagation(),e.preventDefault()})),m=d.select("#graph svg");m.on(".zoom",null),m.call(h),m.on("dblclick.zoom",null),m.on("wheel.zoom",null);var p=d.select("#graph #graph0");p.on(".zoom",null),p.call(h)},getTransformData:function(t){if(!t)return[];var e=t.getAttribute("transform"),a={};if(e){var n=e.trim().split(" ");n.forEach((function(t){var e=t.indexOf("("),n=t.indexOf(")"),i=t.substring(0,e),r=t.substring(e+1,n).split(",").map((function(t){return parseFloat(t)||0}));a[i]=r}))}return a},selectNodeInfo:function(t){var e=this;if(this.selectedNode=[],t&&t.key){var a="",n="";if(-1!==t.attributes.class.indexOf("Operator")){a=t.attributes.id.slice(0,t.attributes.id.lastIndexOf("/"));var i=-1;t.attributes.id.match(/\d+$/)&&(i=parseInt(t.attributes.id.match(/\d+$/)[0])),this.allGraphData[a]&&i>-1&&(n=this.allGraphData[a].operations[i])}else a=t.attributes.id,n=this.allGraphData[a];if(n){var r=["op_module","op_type","children","operations","id","key"];Object.keys(n).forEach((function(t){if(!r.includes(t)){var a=n[t]instanceof Array?n[t].join(", "):null===n[t]?"None":n[t];e.selectedNode.push({key:t,value:a})}}))}}},fit:function(){var t=document.getElementById("graph0"),e=t.getBBox(),a="translate(".concat(-e.x,",").concat(-e.y,") scale(1)");t.setAttribute("transform",a)},downLoadSVG:function(){var t=document.querySelector("#graph #graph0").innerHTML,e=document.getElementById("graph0").getBBox(),a="".concat(e.x," ").concat(e.y," ").concat(e.width," ").concat(e.height),n='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" '+'width="'.concat(e.width,'" height="').concat(e.height,'" ')+'viewBox="'.concat(a,'">').concat(s["a"].dataMapDownloadStyle[this.$store.state.themeIndex],"<g>").concat(t,"</g></svg>"),i="data:image/svg+xml;base64,\n      ".concat(window.btoa(unescape(encodeURIComponent(n)))),r=document.createElement("a");r.href=i,r.download="dataMap.svg";var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),r.dispatchEvent(o)},toggleRight:function(){this.rightShow=!this.rightShow},foldLegend:function(){this.showLegend=!this.showLegend},jumpToTrainDashboard:function(){this.$router.push({path:"/train-manage/training-dashboard",query:{id:this.trainJobID}})}}},l=u,g=(a("5fb0"),a("2877")),h=Object(g["a"])(l,n,i,!1,null,null,null);e["default"]=h.exports},"498a":function(t,e,a){"use strict";var n=a("23e7"),i=a("58a8").trim,r=a("c8d2");n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return i(this)}})},"4d06":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAptJREFUOBGllEFoE0EUhudtbRUvRuhFcognz4V6sSCSg7Ee2kNpoyhYAt1GULEr3YhWsL0oZrWJoOBmK7GCoov2oAWpRSJ4UZDi2ZM9BC8FgweRtmZ8f9wZpprSgAObee+f/32Z2Zkdyhf9IZLithDidWes43Qmk/nJccutXC7vWKmt3uOClCRx3hKSbCnFHn6GV2prc2EYdrRKgxc1qAUDLItnN0PEv9yklEeXq9+e+b7fvhUUHnhRAy8YYFnuhdFQCjqnAPxPfd9/iCeVSmWb0v7uMQYPvGoMDLBICV4hGJOyXlA5/2OYiMdOpNPpX0pDz8tsW67WHvPM0konshzXsYvILSU2BBIXVY6CL9XaLPfagzjSNExwjYJtACLJOdk8kbiioPxST94qBvcZRHgQQ1Pj8KJG5ej1kk3RK/iT/H6uao3ETCOWYkRpDJtyneykylXfFIhBr1C6xrO6pIxmz+/3uuuMXjY1FW8KhIGhHkPHlRk9w24yzDU1M9Yv3BT/J27brDhast51w9eT6u3fvrjw8o2h6bApMD9dmuLvRu82CQr4WeKq7qjy4OEj/RZD32pSFPwD5B2e4DEG/mkW0YNxx7Z7DnTPv/+wlOBvtCsaOpTq7VtfXJh/p7zoN2xKvuDnhBQ3tIHokTtmn+KNqEPjDbK8YvDQPIs42OZZ1JuCT8+E4dPbG48NKxiAiCMtRN5oPIFGbZQ2ZpgvBGeErN+JNC4Uc/u79h1LJpPrSjN7XA4fP31+yod/QOtknc059l3ypktpnjbfHHw9ohG92LVTDmaz2TVtbhLg+uIb57m6cXj2kld43GLMiIKx+IqXNLQVDHx4EvHdg6hBDgZYliAZ8BK/8jPbGWsf4OtqFYZWGryoQS0YYP0GSgsoUPv9lyUAAAAASUVORK5CYII="},"5fb0":function(t,e,a){"use strict";a("dee8")},6670:function(t,e,a){var n={"./0/map-dataset.svg":"c77d","./1/map-dataset.svg":"1300"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="6670"},"893d":function(t,e,a){var n={"./0/batch-img.svg":"bf6c","./1/batch-img.svg":"3d78"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="893d"},9485:function(t,e,a){t.exports=a.p+"static/img/nodata.8290bed9.png"},"97cd":function(t,e,a){t.exports=a.p+"static/img/operator-node.1a9f3db8.svg"},"9f1b":function(t,e,a){t.exports=a.p+"static/img/creat-dataset.17b9b72d.svg"},a15b:function(t,e,a){"use strict";var n=a("23e7"),i=a("44ad"),r=a("fc6a"),s=a("a640"),o=[].join,c=i!=Object,d=s("join",",");n({target:"Array",proto:!0,forced:c||!d},{join:function(t){return o.call(r(this),void 0===t?",":t)}})},a294:function(t,e,a){t.exports=a.p+"static/img/repeat-dataset.f82c8a5f.svg"},bf6c:function(t,e,a){t.exports=a.p+"static/img/batch-img.01b05453.svg"},c77d:function(t,e,a){t.exports=a.p+"static/img/map-dataset.ea36ef19.svg"},c8d2:function(t,e,a){var n=a("d039"),i=a("5899"),r="​᠎";t.exports=function(t){return n((function(){return!!i[t]()||r[t]()!=r||i[t].name!==t}))}},d18b:function(t,e,a){t.exports=a.p+"static/img/operator-node.e4e15cb8.svg"},d674:function(t,e,a){t.exports=a.p+"static/img/creat-dataset.b46fdd0b.svg"},dbf9:function(t,e,a){t.exports=a.p+"static/img/shuffle-dataset.3fa06fa2.svg"},dc65:function(t,e,a){var n={"./0/shuffle-dataset.svg":"dbf9","./1/shuffle-dataset.svg":"2b98"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="dc65"},dee8:function(t,e,a){},e057:function(t,e,a){var n={"./0/operator-node.svg":"d18b","./1/operator-node.svg":"97cd"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="e057"},e08c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM2RTk2MTdDQUQyMzExRTk5NTMxREEwM0Y1RTkyRTgzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM2RTk2MTdEQUQyMzExRTk5NTMxREEwM0Y1RTkyRTgzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzZFOTYxN0FBRDIzMTFFOTk1MzFEQTAzRjVFOTJFODMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzZFOTYxN0JBRDIzMTFFOTk1MzFEQTAzRjVFOTJFODMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4nS1hsAAAAxElEQVR42mL8//8/AyWAceANmDlzJkUGMOGRSwTiN0CcTo4BBUA8F4iFgXg6EBeRYkAdEPcD8R0gNgfia0DcC8S12AxgQQ4PIO4G4mIgvgzEbkD8AojtgXgXEDcBMTcQV2BzATMQz4BqPgXEDlDNIPAWiJ2A+BgQlwPxFKhlKAaA/JsGxIeA2AWI36G59CMQuwPxPiDOhoYLigGmQLwRiD2B+DOO8PoCxD5AvB6IddDDQJvIaP8OxEHEpoOhkhcoNQAgwACvNDJTYJfE+QAAAABJRU5ErkJggg=="},e5a4:function(t,e,a){t.exports=a.p+"static/img/repeat-dataset.129b2a7f.svg"},e9c4:function(t,e,a){var n=a("23e7"),i=a("d066"),r=a("d039"),s=i("JSON","stringify"),o=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,d=/^[\uDC00-\uDFFF]$/,u=function(t,e,a){var n=a.charAt(e-1),i=a.charAt(e+1);return c.test(t)&&!d.test(i)||d.test(t)&&!c.test(n)?"\\u"+t.charCodeAt(0).toString(16):t},l=r((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&n({target:"JSON",stat:!0,forced:l},{stringify:function(t,e,a){var n=s.apply(null,arguments);return"string"==typeof n?n.replace(o,u):n}})}}]);