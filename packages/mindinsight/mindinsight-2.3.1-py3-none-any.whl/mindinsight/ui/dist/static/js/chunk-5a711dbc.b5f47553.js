(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a711dbc"],{"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("ac1f"),n("00b4"),n("25f0"),n("3ca3");var i=n("6b75");function r(t,e){if(t){if("string"==typeof t)return Object(i["a"])(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i["a"])(t,e):void 0}}},1148:function(t,e,n){"use strict";var i=n("a691"),r=n("1d80");t.exports="".repeat||function(t){var e=String(r(this)),n="",a=i(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},3835:function(t,e,n){"use strict";function i(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return c}));n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function r(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,a,o,c=[],s=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=a.call(n)).done)&&(c.push(i.value),c.length!==e);s=!0);}catch(t){l=!0,r=t}finally{try{if(!s&&null!=n["return"]&&(o=n["return"](),Object(o)!==o))return}finally{if(l)throw r}}return c}}var a=n("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return i(t)||r(t,e)||Object(a["a"])(t,e)||o()}},"408a":function(t,e,n){var i=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"4c86":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"performance-dashboard"},[n("div",{staticClass:"container"},[n("div",{staticClass:"header",on:{click:function(e){return t.jump("step-trace",t.performanceState===t.normalState)}}},[n("span",{staticClass:"title"},[t._v(t._s(t.performanceChart.title))]),n("span",{class:{jump:!0,"is-effective":t.performanceState===t.normalState}},[t._v(" "+t._s(t.$t("profiling.viewDetail"))+" "),n("i",{staticClass:"el-icon-d-arrow-right"})])]),n("div",{ref:"performance",staticClass:"content"},[n("empty",{attrs:{state:t.performanceState}})],1)]),n("div",{staticClass:"container"},[n("div",{staticClass:"header",on:{click:function(e){return t.jump("communication",t.commState===t.normalState)}}},[n("span",{staticClass:"title"},[t._v(t._s(t.commChart.title))]),n("span",{class:{jump:!0,"is-effective":t.commState===t.normalState}},[t._v(" "+t._s(t.$t("profiling.viewDetail"))+" "),n("i",{staticClass:"el-icon-d-arrow-right"})])]),n("div",{ref:"comm",staticClass:"content"},[n("empty",{attrs:{state:t.commState}})],1)])])},r=[],a=(n("99af"),n("cb29"),n("d3b7"),n("159b"),n("9fac")),o=n("3778"),c=n("d138"),s=n("9944"),l=4,u={components:{empty:c["d"]},data:function(){return{trainInfo:{id:this.$route.query.id,path:this.$route.query.path,dir:this.$route.query.dir},resizeTimer:null,performanceState:c["b"],performanceChart:{dom:null,instance:null,data:null,dimensions:[this.$t("profilingCluster.rankID"),this.$t("profiling.iterationGapTime"),this.$t("profiling.fpBpTime"),this.$t("profiling.tailTime"),this.$t("profiling.iterTotalTime")],title:this.$t("profilingCluster.stepChartTitle")},commState:c["b"],commChart:{dom:null,instance:null,data:null,dimensions:[this.$t("profilingCluster.rankID"),this.$t("profilingCluster.commCost"),this.$t("profilingCluster.waitCost")],title:this.$t("profilingCluster.commChartTitle")},normalState:"normal",themeIndex:this.$store.state.themeIndex}},mounted:function(){var t=this;this.performanceChart.dom=this.$refs.performance?this.$refs.performance:null,this.commChart.dom=this.$refs.comm?this.$refs.comm:null,this.queryPerformanceInfo().then((function(e){e&&t.initChart(t.performanceChart)})),this.queryCommInfo().then((function(e){e&&t.initChart(t.commChart)})),window.addEventListener("resize",this.resizeCallBack),this.$bus.$on("collapse",this.resizeCallBack)},methods:{resizeCallBack:function(){var t=this;this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){t.performanceChart.dom&&t.performanceChart.instance&&t.performanceChart.instance.resize(),t.commChart.dom&&t.commChart.instance&&t.commChart.instance.resize()}),100)},jump:function(t,e){e&&this.$emit("viewDetail",t)},queryPerformanceInfo:function(){var t=this;return new Promise((function(e){var n={};n.params={train_id:t.trainInfo.id},o["a"].getClusterInfo(n).then((function(n){var i;if((null===n||void 0===n||null===(i=n.data)||void 0===i||null===(i=i.info)||void 0===i?void 0:i.length)>0){var r=[],a=n.data["parallel-mode"],o={"data-parallel":{model:"step_trace_info",dimensions:[t.$t("profilingCluster.rankID"),t.$t("profiling.iterationGapTime"),t.$t("profiling.fpBpTime"),t.$t("profiling.tailTime"),t.$t("profiling.iterTotalTime")]},"model-parallel":{model:"step_bottleneck_info",dimensions:[t.$t("profilingCluster.rankID"),t.$t("profiling.iterationGapTime"),t.$t("profilingCluster.computationTime"),t.$t("profilingCluster.communicationAloneTime")]},"pipeline-parallel":{model:"step_bottleneck_info",dimensions:[t.$t("profilingCluster.rankID"),t.$t("profiling.iterationGapTime"),t.$t("profilingCluster.computationTime"),t.$t("profilingCluster.stageTime"),t.$t("profilingCluster.communicationAloneTime"),t.$t("profilingCluster.collectiveCommunicationAlone"),t.$t("profilingCluster.receiveAloneTime")]}},s=[];n.data.info.forEach((function(t){var e=[t.rank_id].concat(t[o[a].model]);s.push(e)})),"pipeline-parallel"===a?s.forEach((function(t){r.push([t[0],t[1],t[2],t[4],t[3],t[6],t[5]])})):r=s,t.performanceChart.data=r,t.performanceChart.dimensions=o[a].dimensions,t.performanceState=t.normalState,e(!0)}else t.performanceState=c["c"]})).catch((function(n){t.performanceState=c["c"],e(!1)}))}))},queryCommInfo:function(){var t=this;return new Promise((function(e){var n={};n.params={train_id:t.trainInfo.id},o["a"].getCommInfo(n).then((function(n){var i;if((null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.communication.length)>0){var r=[];n.data.communication.forEach((function(t){r.push([t.rank_id,Object(s["c"])(t.communication_info[0],l),Object(s["c"])(t.communication_info[1],l)])})),t.commChart.data=r,t.commState=t.normalState,e(!0)}else t.commState=c["c"]})).catch((function(n){t.commState=c["c"],e(!1)}))}))},initChart:function(t){t.dom&&(t.instance||(t.instance=a["a"].init(t.dom,a["b"])),t.instance.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},confine:!0},legend:{right:70,top:15,data:""},grid:{top:60,left:80,right:80},dataset:{source:[t.dimensions].concat(t.data)},xAxis:{name:this.$t("profilingCluster.rankID"),nameTextStyle:{align:"left",padding:[0,5]},type:"category",axisLine:{lineStyle:{width:2}}},yAxis:{name:this.$t("profilingCluster.timeTitle"),nameGap:20,nameTextStyle:{align:"right",padding:[0,5]},axisLine:{lineStyle:{width:2}},splitLine:{lineStyle:{type:"dashed"}}},series:new Array(t.dimensions.length-1).fill({type:"bar",barWidth:8})}))}},beforeDestroy:function(){this.resizeTimer&&clearTimeout(this.resizeTimer),window.removeEventListener("resize",this.resizeCallBack),this.$bus.$off("collapse",this.resizeCallBack)}},f=u,m=(n("88aa"),n("2877")),d=Object(m["a"])(f,i,r,!1,null,"83c815f2",null);e["default"]=d.exports},"4df4":function(t,e,n){"use strict";var i=n("0366"),r=n("7b0b"),a=n("9bdd"),o=n("e95a"),c=n("50c4"),s=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,f,m,d,p=r(t),h="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,b=void 0!==v,y=l(p),C=0;if(b&&(v=i(v,g>2?arguments[2]:void 0,2)),void 0==y||h==Array&&o(y))for(e=c(p.length),n=new h(e);e>C;C++)d=b?v(p[C],C):p[C],s(n,C,d);else for(f=y.call(p),m=f.next,n=new h;!(u=m.call(f)).done;C++)d=b?a(f,v,[u.value,C],!0):u.value,s(n,C,d);return n.length=C,n}},"5e89":function(t,e,n){var i=n("861d"),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},"6b75":function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}n.d(e,"a",(function(){return i}))},7494:function(t,e,n){"use strict";n("cb68")},"81d5":function(t,e,n){"use strict";var i=n("7b0b"),r=n("23cb"),a=n("50c4");t.exports=function(t){var e=i(this),n=a(e.length),o=arguments.length,c=r(o>1?arguments[1]:void 0,n),s=o>2?arguments[2]:void 0,l=void 0===s?n:r(s,n);while(l>c)e[c++]=t;return e}},8413:function(t,e,n){},"88aa":function(t,e,n){"use strict";n("8413")},"8ba4":function(t,e,n){var i=n("23e7"),r=n("5e89");i({target:"Number",stat:!0},{isInteger:r})},9485:function(t,e,n){t.exports=n.p+"static/img/nodata.8290bed9.png"},9944:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return c}));var i=n("3835");n("99af"),n("caad"),n("8ba4"),n("b680"),n("d3b7"),n("ac1f"),n("25f0"),n("2532"),n("466d");function r(t,e,n){t.toLowerCase().includes("rgb")||(t=a(t)),e.toLowerCase().includes("rgb")||(e=a(e));for(var r=t.match(/[0-9]\d*/g),o=Object(i["a"])(r,3),c=o[0],s=o[1],l=o[2],u=e.match(/[0-9]\d*/g),f=Object(i["a"])(u,3),m=f[0],d=f[1],p=f[2],h=(+m-+c)/n,g=(+d-+s)/n,v=(+p-+l)/n,b=[t],y=1;y<n;y++){var C=parseInt(h*y+ +c),$=parseInt(g*y+ +s),S=parseInt(v*y+ +l);b.push("rgb(".concat(C,",").concat($,",").concat(S,")"))}return b}function a(t){var e=16;return 4===t.length?"rgb(".concat(parseInt(t[1]+t[1],e),", ").concat(parseInt(t[2]+t[2],e),", ").concat(parseInt(t[3]+t[3],e),")"):"rgb(".concat(parseInt(t[1]+t[2],e),", ").concat(parseInt(t[3]+t[4],e),", ").concat(parseInt(t[5]+t[6],e),")")}function o(t,e){if("number"!==typeof t&&(t=parseFloat(t)),isNaN(t))return"NaN";var n=t+"",i=n.indexOf(".");return i<0||n.length-i-1<=e?n:t.toFixed(e)}function c(t){if(Number.isInteger(t))return!0;if("string"!==typeof t)return!1;var e=+t;return e+""===t&&Number.isInteger(e)}},a630:function(t,e,n){var i=n("23e7"),r=n("4df4"),a=n("1c7e"),o=!a((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:o},{from:r})},b0c0:function(t,e,n){var i=n("83ab"),r=n("9bf2").f,a=Function.prototype,o=a.toString,c=/^\s*function ([^ (]*)/,s="name";i&&!(s in a)&&r(a,s,{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(t){return""}}})},b680:function(t,e,n){"use strict";var i=n("23e7"),r=n("a691"),a=n("408a"),o=n("1148"),c=n("d039"),s=1..toFixed,l=Math.floor,u=function(t,e,n){return 0===e?n:e%2===1?u(t,e-1,n*t):u(t*t,e/2,n)},f=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},m=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){s.call({})}));i({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,n,i,c,s=a(this),m=r(t),d=[0,0,0,0,0,0],p="",h="0",g=function(t,e){var n=-1,i=e;while(++n<6)i+=t*d[n],d[n]=i%1e7,i=l(i/1e7)},v=function(t){var e=6,n=0;while(--e>=0)n+=d[e],d[e]=l(n/t),n=n%t*1e7},b=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==d[t]){var n=String(d[t]);e=""===e?n:e+o.call("0",7-n.length)+n}return e};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(p="-",s=-s),s>1e-21)if(e=f(s*u(2,69,1))-69,n=e<0?s*u(2,-e,1):s/u(2,e,1),n*=4503599627370496,e=52-e,e>0){g(0,n),i=m;while(i>=7)g(1e7,0),i-=7;g(u(10,i,1),0),i=e-1;while(i>=23)v(1<<23),i-=23;v(1<<i),g(1,1),v(2),h=b()}else g(0,n),g(1<<-e,0),h=b()+o.call("0",m);return m>0?(c=h.length,h=p+(c<=m?"0."+o.call("0",m-c)+h:h.slice(0,c-m)+"."+h.slice(c-m))):h=p+h,h}})},cb29:function(t,e,n){var i=n("23e7"),r=n("81d5"),a=n("44d2");i({target:"Array",proto:!0},{fill:r}),a("fill")},cb68:function(t,e,n){},d138:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty-container"},[i("img",{attrs:{src:n("9485")}}),i("span",[t._v(t._s(t.text))])])},r=[],a="noData",o="dataLoading",c="heterogeneous",s={props:{state:{type:String,default:o}},data:function(){return{noData:this.$t("public.noData"),emptyData:this.$t("public.emptyData"),dataLoading:this.$t("public.dataLoading"),stayTuned:this.$t("public.stayTuned"),heterogeneous:this.$t("profiling.isHeterogeneous"),dataSelectTip:this.$t("lossAnalysis.dataSelectTip")}},computed:{text:function(){return this[this.state]?this[this.state]:""}}},l=s,u=(n("7494"),n("2877")),f=Object(u["a"])(l,i,r,!1,null,"fc3dc28a",null);e["d"]=f.exports},d28b:function(t,e,n){var i=n("746f");i("iterator")},e01a:function(t,e,n){"use strict";var i=n("23e7"),r=n("83ab"),a=n("da84"),o=n("5135"),c=n("861d"),s=n("9bf2").f,l=n("e893"),u=a.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var f={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new u(t):void 0===t?u():u(t);return""===t&&(f[e]=!0),e};l(m,u);var d=m.prototype=u.prototype;d.constructor=m;var p=d.toString,h="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;s(d,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=p.call(t);if(o(f,t))return"";var n=h?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:m})}},fb6a:function(t,e,n){"use strict";var i=n("23e7"),r=n("861d"),a=n("e8b5"),o=n("23cb"),c=n("50c4"),s=n("fc6a"),l=n("8418"),u=n("b622"),f=n("1dde"),m=n("ae40"),d=f("slice"),p=m("slice",{ACCESSORS:!0,0:0,1:2}),h=u("species"),g=[].slice,v=Math.max;i({target:"Array",proto:!0,forced:!d||!p},{slice:function(t,e){var n,i,u,f=s(this),m=c(f.length),d=o(t,m),p=o(void 0===e?m:e,m);if(a(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?r(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(f,d,p);for(i=new(void 0===n?Array:n)(v(p-d,0)),u=0;d<p;d++,u++)d in f&&l(i,u,f[d]);return i.length=u,i}})}}]);