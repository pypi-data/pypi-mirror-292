(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6ffbaaa"],{"37c8":function(t,e,i){},"3db8":function(t,e,i){"use strict";i("37c8")},"53ca":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("e01a"),i("d28b"),i("e260"),i("d3b7"),i("3ca3"),i("ddb0");function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}},7494:function(t,e,i){"use strict";i("cb68")},"81d5":function(t,e,i){"use strict";var n=i("7b0b"),r=i("23cb"),a=i("50c4");t.exports=function(t){var e=n(this),i=a(e.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,i),l=o>2?arguments[2]:void 0,c=void 0===l?i:r(l,i);while(c>s)e[s++]=t;return e}},9485:function(t,e,i){t.exports=i.p+"static/img/nodata.8290bed9.png"},cb29:function(t,e,i){var n=i("23e7"),r=i("81d5"),a=i("44d2");n({target:"Array",proto:!0},{fill:r}),a("fill")},cb68:function(t,e,i){},d138:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return s}));var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty-container"},[n("img",{attrs:{src:i("9485")}}),n("span",[t._v(t._s(t.text))])])},r=[],a="noData",o="dataLoading",s="heterogeneous",l={props:{state:{type:String,default:o}},data:function(){return{noData:this.$t("public.noData"),emptyData:this.$t("public.emptyData"),dataLoading:this.$t("public.dataLoading"),stayTuned:this.$t("public.stayTuned"),heterogeneous:this.$t("profiling.isHeterogeneous"),dataSelectTip:this.$t("lossAnalysis.dataSelectTip")}},computed:{text:function(){return this[this.state]?this[this.state]:""}}},c=l,f=(i("7494"),i("2877")),u=Object(f["a"])(c,n,r,!1,null,"fc3dc28a",null);e["d"]=u.exports},d28b:function(t,e,i){var n=i("746f");n("iterator")},e01a:function(t,e,i){"use strict";var n=i("23e7"),r=i("83ab"),a=i("da84"),o=i("5135"),s=i("861d"),l=i("9bf2").f,c=i("e893"),f=a.Symbol;if(r&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var u={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new f(t):void 0===t?f():f(t);return""===t&&(u[e]=!0),e};c(p,f);var m=p.prototype=f.prototype;m.constructor=p;var d=m.toString,h="Symbol(test)"==String(f("test")),g=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=d.call(t);if(o(u,t))return"";var i=h?e.slice(7,-1):e.replace(g,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:p})}},e4e0:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"performance-dashboard"},[i("div",{staticClass:"container"},[i("div",{staticClass:"header",on:{click:function(e){return t.jump("step-trace",t.performanceState===t.normalState)}}},[i("span",{staticClass:"title"},[t._v(t._s(t.performanceChart.title))]),i("span",{class:{jump:!0,"is-effective":t.performanceState===t.normalState}},[t._v(" "+t._s(t.$t("profiling.viewDetail"))+" "),i("i",{staticClass:"el-icon-d-arrow-right"})])]),i("div",{ref:"performance",staticClass:"content"},[i("empty",{attrs:{state:t.performanceState}})],1)])])},r=[],a=i("53ca"),o=(i("99af"),i("cb29"),i("d3b7"),i("159b"),i("9fac")),s=i("3778"),l=i("d138"),c={components:{empty:l["d"]},data:function(){return{trainInfo:{id:this.$route.query.id,path:this.$route.query.path,dir:this.$route.query.dir},resizeTimer:null,performanceState:l["b"],performanceChart:{dom:null,instance:null,data:null,dimensions:[this.$t("profilingCluster.rankID"),this.$t("profiling.iterationGapTime"),this.$t("profiling.fpBpTime"),this.$t("profiling.tailTime")],title:this.$t("profilingCluster.stepChartTitle")},commState:l["b"],commChart:{dom:null,instance:null,data:null,dimensions:[this.$t("profilingCluster.rankID"),this.$t("profilingCluster.commCost"),this.$t("profilingCluster.waitCost")],title:this.$t("profilingCluster.commChartTitle")},normalState:"normal",themeIndex:this.$store.state.themeIndex}},mounted:function(){var t=this;this.performanceChart.dom=this.$refs.performance?this.$refs.performance:null,this.commChart.dom=this.$refs.comm?this.$refs.comm:null,this.queryPerformanceInfo().then((function(e){e&&t.initChart(t.performanceChart)})),window.addEventListener("resize",this.resizeCallBack),this.$bus.$on("collapse",this.resizeCallBack)},methods:{resizeCallBack:function(){var t=this;this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){t.performanceChart.dom&&t.performanceChart.instance&&t.performanceChart.instance.resize(),t.commChart.dom&&t.commChart.instance&&t.commChart.instance.resize()}),100)},jump:function(t,e){e&&this.$emit("viewDetail",t)},queryPerformanceInfo:function(){var t=this;return new Promise((function(e){var i={};i.params={train_id:t.trainInfo.id},s["a"].getClusterInfo(i).then((function(i){var n;if("object"===Object(a["a"])(i.data)&&i.data.is_heterogeneous)t.performanceState=l["a"];else if((null===i||void 0===i||null===(n=i.data)||void 0===n||null===(n=n.info)||void 0===n?void 0:n.length)>0){var r=[],o=i.data["parallel-mode"],s={"data-parallel":{model:"step_trace_info",dimensions:[t.$t("profilingCluster.rankID"),t.$t("profiling.iterationGapTime"),t.$t("profiling.fpBpTime"),t.$t("profiling.tailTime")]},"model-parallel":{model:"step_bottleneck_info",dimensions:[t.$t("profilingCluster.rankID"),t.$t("profiling.iterationGapTime"),t.$t("profilingCluster.computationTime"),t.$t("profilingCluster.communicationAloneTime")]},"pipeline-parallel":{model:"step_bottleneck_info",dimensions:[t.$t("profilingCluster.rankID"),t.$t("profiling.iterationGapTime"),t.$t("profilingCluster.computationTime"),t.$t("profilingCluster.stageTime"),t.$t("profilingCluster.communicationAloneTime"),t.$t("profilingCluster.collectiveCommunicationAlone"),t.$t("profilingCluster.receiveAloneTime")]}},c=[];i.data.info.forEach((function(t){var e=[t.rank_id].concat(t[s[o].model]);c.push(e)})),"pipeline-parallel"===o?c.forEach((function(t){r.push([t[0],t[1],t[2],t[4],t[3],t[6],t[5]])})):r=c,t.performanceChart.data=r,t.performanceChart.dimensions=s[o].dimensions,t.performanceState=t.normalState,e(!0)}else t.performanceState=l["c"]})).catch((function(i){t.performanceState=l["c"],e(!1)}))}))},initChart:function(t){t.dom&&(t.instance||(t.instance=o["a"].init(t.dom,o["b"])),t.instance.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},confine:!0},legend:{right:70,top:15,data:""},grid:{top:60,left:80,right:80},dataset:{source:[t.dimensions].concat(t.data)},xAxis:{name:this.$t("profilingCluster.rankID"),nameTextStyle:{align:"left",padding:[0,5]},type:"category",axisLine:{lineStyle:{width:2}}},yAxis:{name:this.$t("profilingCluster.timeTitle"),nameGap:20,nameTextStyle:{align:"right",padding:[0,5]},axisLine:{lineStyle:{width:2}},splitLine:{lineStyle:{type:"dashed"}}},series:new Array(t.dimensions.length-1).fill({type:"bar",barWidth:8})}))}},beforeDestroy:function(){this.resizeTimer&&clearTimeout(this.resizeTimer),window.removeEventListener("resize",this.resizeCallBack),this.$bus.$off("collapse",this.resizeCallBack)}},f=c,u=(i("3db8"),i("2877")),p=Object(u["a"])(f,n,r,!1,null,"735a22b0",null);e["default"]=p.exports}}]);