(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-024e2517"],{"2fcc":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"profiling-dashboard"},[r("div",{staticClass:"profiling-dashboard-head"},[r("el-tabs",{on:{"tab-click":t.onTabClick},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabs,(function(e){return t.isSingle&&e===t.$t("profiling.cluster")?t._e():r("el-tab-pane",{key:e,attrs:{label:e,name:e}})})),1),r("div",{staticClass:"path",style:{left:t.left+"px"}},[t._v(" "+t._s(t.$t("symbols.leftbracket")+t.$t("trainingDashboard.summaryDirPath")+t.trainInfo.path+t.$t("symbols.rightbracket"))+" ")])],1),r("div",{staticClass:"profiling-dashboard-content"},[r("router-view")],1)])},i=[],a=(r("caad"),r("4e82"),r("e9c4"),r("b64b"),r("d3b7"),r("2532"),r("159b"),r("3778")),s={data:function(){return{trainInfo:{id:this.$route.query.id,path:this.$route.query.path,dir:this.$route.query.dir},tab:null,tabs:[this.$t("profiling.singleHost"),this.$t("profiling.cluster")],left:0,isPynative:!1,isSingle:!0}},created:function(){this.checkProfilerDataVersion(),this.initProfilerInfo()},updated:function(){this.updateTab()},watch:{isPynative:{handler:function(){var t=0;this.isSingle?(t+=this.tabs[0].length,this.left=this.isPynative?t*("en-us"===this.$store.state.language?10:20):t*("en-us"===this.$store.state.language?10:20)+10):(this.tabs.forEach((function(e){return t+=e.length})),this.left=this.isPynative?t*("en-us"===this.$store.state.language?10:20):t*("en-us"===this.$store.state.language?10:20)+40)},immediate:!0},isSingle:{handler:function(t,e){if(t!=e){var r=0;this.isSingle?(r+=this.tabs[0].length,this.left=r*("en-us"===this.$store.state.language?10:20)+10):(this.tabs.forEach((function(t){return r+=t.length})),this.left=r*("en-us"===this.$store.state.language?10:20)+40)}}}},methods:{initProfilerInfo:function(){var t=this;return new Promise((function(e){var r={profile:t.trainInfo.dir,train_id:t.trainInfo.id};a["a"].getProfilerDeviceData(r).then((function(r){if(Object.keys(r.data).length>0){var n=r.data.profiler_mode;t.rankIDList=r.data.device_list.sort((function(t,e){return+t-+e})),t.rankID=t.rankIDList[0],t.isSingle=!(t.rankIDList.length>1),t.isPynative="pynative"===n,t.$route.query.rankID=t.rankID,t.$route.query.mode=n,t.$route.query.rankIDList=JSON.stringify(t.rankIDList);var i=t.tab===t.tabs[0]?"single":"cluster";"/profiling"===t.$route.path&&t.$router.push({path:"/profiling/"+i,query:t.$route.query}),e(!0)}else t.rankIDList=[],t.rankID="",e(!1);t.isPynative&&t.tabs.pop()})).catch((function(){t.rankIDList=[],t.rankID="",e(!1)}))}))},updateTab:function(){var t=this.$route.path;this.tab=t.includes("/profiling/cluster")?this.tabs[1]:this.tabs[0]},onTabClick:function(){var t=this.tab===this.tabs[0]?"single":"cluster";this.$router.push({path:"/profiling/"+t,query:this.$route.query})},checkProfilerDataVersion:function(){var t=this,e={profile:this.trainInfo.dir,train_id:this.trainInfo.id};a["a"].getProfilerInfo(e).then((function(e){e.data&&0==e.data.state&&t.$message({type:"warning",offset:50,center:!0,message:t.$t("profiling.dataVersionTips",{ms_version:e.data.ms,mi_version:e.data.mi})})}),(function(t){})).catch((function(t){}))}}},o=s,u=(r("6567"),r("2877")),c=Object(u["a"])(o,n,i,!1,null,null,null);e["default"]=c.exports},3778:function(t,e,r){"use strict";r("99af"),r("d3b7"),r("159b");var n=r("f756");e["a"]={queryDatasetGraph:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datasets/dataset_graph",params:t})},queryLineagesData:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/lineagemgr/lineages",data:t.body})},putLineagesData:function(t){return Object(n["b"])({method:"put",url:"v1/mindinsight/lineagemgr/lineages?train_id="+Object(n["c"])(t.train_id),data:t.body})},queryTargetsData:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/optimizer/targets/search",data:t.body})},querySummaryList:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/train-jobs",params:t,headers:{ignoreError:e}})},getScalarsSample:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/scalar/metadata",params:t,headers:{ignoreError:!0}})},getTensorsSample:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/tensors",params:t,headers:{ignoreError:!0}})},queryGraphData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/nodes",params:t})},searchNodesNames:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/nodes/names",params:t})},querySingleNode:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/single-node",params:t})},getSingleTrainJob:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/single-job",params:t,headers:{ignoreError:e}})},trainJobsCaches:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/datavisual/train-job-caches",data:t})},getSummarySample:function(t){var e=t.train_id,r="";return e.forEach((function(t){t&&(r+="train_id=".concat(Object(n["c"])(t),"&"))})),r+="tag=".concat(Object(n["c"])(t.tag)),Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/scalars?".concat(r)})},getImageMetadatas:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/image/metadata",params:t,headers:{ignoreError:!0}})},getImageData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/image/single-image",params:t,headers:{ignoreError:!0}})},getDatavisualPlugins:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/plugins",params:t})},getHistogramData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/histograms",params:t})},getProfilerDeviceData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/devices",params:t})},getProfilerOpData:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/ops/search",params:t.params,data:t.body,headers:{ignoreError:!0}})},queryDataOfProfileHelper:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/summary/propose",params:t})},queryDataOfProfileClusterHelper:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/summary/cluster-propose",params:t,timeout:24e4})},queryTrainingTrace:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/training-trace/graph",params:t,headers:{ignoreError:!0}})},targetTimeInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/training-trace/target-time-info",params:t,headers:{ignoreError:!0}})},queryTimeline:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/timeline",params:t,headers:{ignoreError:!0}})},queryTimelineInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/timeline-summary",params:t,headers:{ignoreError:!0}})},queryMsprofTimelineOption:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/msprof_timeline_option",params:t,headers:{ignoreError:!0}})},queryMsprofTimeline:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/msprof_timeline",params:t,headers:{ignoreError:!0}})},queryOpQueue:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/minddata-pipeline/op-queue",params:t.params,data:t.body,headers:{ignoreError:!0}})},queryQueue:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/minddata-pipeline/queue",params:t,headers:{ignoreError:!0}})},queryProcessSummary:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/process_summary",params:t,headers:{ignoreError:!0}})},queueInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/queue_info",params:t,headers:{ignoreError:!0}})},minddataOp:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/minddata_op",params:t,headers:{ignoreError:!0}})},getGraphData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/parallel-strategy/graphs",params:t,headers:{ignoreError:!0},timeout:6e4})},getSession:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions",data:t})},deleteSession:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(t,"/delete")})},checkSessions:function(){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions"})},pollData:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/poll-data"),params:t,headers:{ignoreError:!0},timeout:0})},retrieve:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/retrieve"),data:t})},createWatchpoint:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/create-watchpoint"),data:t})},updateWatchpoint:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/update-watchpoint"),data:t})},deleteWatchpoint:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/delete-watchpoint"),data:t})},control:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/control"),data:t})},search:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/search"),params:t})},retrieveNodeByBfs:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/retrieve_node_by_bfs",params:t})},tensorComparisons:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-comparisons"),params:t})},tensors:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensors"),params:t})},retrieveTensorHistory:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-history"),data:t})},queryConditions:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(t,"/condition-collections")})},recheckWatchPoints:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(t,"/recheck")})},searchWatchpointHits:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/search-watchpoint-hits"),data:t})},queryStackList:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/stacks"),params:t})},loadTensor:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-files/load"),data:t})},getGraphRuns:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(t,"/ranks/").concat(e,"/graph-runs")})},getExplainList:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/explainer/explain-jobs",params:t})},queryTrainInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/explainer/explain-job",params:t})},queryPageInfo:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/explainer/saliency",data:t})},getEvaluation:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/explainer/evaluation",params:t})},queryHOCData:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/explainer/hoc",data:t})},tensorHitsData:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-hits"),params:t})},getTensorGraphData:function(t,e){return Object(n["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-graphs"),params:t})},getCpuUtilization:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/minddata-cpu-utilization-summary",params:t.params,data:t.body})},setRecommendWatchPoints:function(t,e){return Object(n["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/set-recommended-watch-points"),data:t})},queryMemorySummary:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/memory-summary",params:t})},queryMemoryGraphics:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/memory-graphics",params:t})},queryMemoryBreakdowns:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/memory-breakdowns",params:t})},getClusterInfo:function(t){return Object(n["b"])({method:"post",params:t.params,data:t.body,url:"v1/mindinsight/profile/cluster-step-trace-summary"})},getCommInfo:function(t){return Object(n["b"])({method:"post",params:t.params,data:t.body,url:"v1/mindinsight/profile/search-cluster-communication"})},getLinkInfo:function(t){return Object(n["b"])({method:"post",params:t.params,data:t.body,url:"v1/mindinsight/profile/search-cluster-link"})},getClusterPeakMemory:function(t){return Object(n["b"])({method:"get",params:t,url:"v1/mindinsight/profile/cluster-peak-memory"})},getFlopsSummary:function(t){return Object(n["b"])({method:"get",params:t,url:"v1/mindinsight/profile/flops-summary"})},getClusterFlops:function(t){return Object(n["b"])({method:"get",params:t,url:"v1/mindinsight/profile/cluster-flops"})},getFlopsScope:function(t){return Object(n["b"])({method:"get",params:t,url:"v1/mindinsight/profile/flops-scope"})},queryLossGraph:function(t){var e=t.train_id,r="";return Array.isArray(e)?e.forEach((function(t){t&&(r+="train_id=".concat(Object(n["c"])(t),"&"))})):r+="train_id=".concat(Object(n["c"])(e),"&"),r+="type=".concat(t.type),(t.metadata||!1===t.metadata)&&(r+="&metadata=".concat(t.metadata)),(t.interval_id||0===t.interval_id)&&(r+="&interval_id=".concat(t.interval_id)),Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/landscape/landscapes?".concat(r)})},queryEpochIntervals:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/landscape/intervals",params:t})},queryDynamicShape:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/dynamic-shape-detail",data:t,headers:{ignoreError:!0}})},queryAllGraphNodesData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/nodes/all",params:t})},getTimeLineData:function(t,e,r){var i={train_id:t,step:e,device_type:"ascend"};return null!=r&&(i["device_list"]=r),Object(n["b"])({method:"get",url:"v1/mindinsight/profile/marey-graph/timeline",params:i,headers:{ignoreError:!0},timeout:24e4})},getOverviewTime:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/marey-graph/overview-time",params:{train_id:t,device_type:"ascend"},headers:{ignoreError:!0},timeout:24e4})},getCommunicationGraph:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/communication-data",params:{train_id:t},headers:{ignoreError:!0},timeout:24e4})},getFLOPsData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/marey-graph/flops-data",params:{train_id:t},headers:{ignoreError:!0},timeout:24e4})},getMemoryData:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/marey-graph/memory-data",params:{train_id:t,device_type:"ascend"},headers:{ignoreError:!0},timeout:24e4})},queryDynamicShapeGPU:function(t){return Object(n["b"])({method:"post",url:"v1/mindinsight/profile/dynamic-shape-detail",params:t.params,data:t.body,headers:{ignoreError:!0}})},getProfilerInfo:function(t){return Object(n["b"])({method:"get",url:"v1/mindinsight/profile/profile_info",params:t})}}},"4e82":function(t,e,r){"use strict";var n=r("23e7"),i=r("1c0b"),a=r("7b0b"),s=r("d039"),o=r("a640"),u=[],c=u.sort,d=s((function(){u.sort(void 0)})),m=s((function(){u.sort(null)})),g=o("sort"),l=d||!m||!g;n({target:"Array",proto:!0,forced:l},{sort:function(t){return void 0===t?c.call(a(this)):c.call(a(this),i(t))}})},6567:function(t,e,r){"use strict";r("e023")},e023:function(t,e,r){},e9c4:function(t,e,r){var n=r("23e7"),i=r("d066"),a=r("d039"),s=i("JSON","stringify"),o=/[\uD800-\uDFFF]/g,u=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,d=function(t,e,r){var n=r.charAt(e-1),i=r.charAt(e+1);return u.test(t)&&!c.test(i)||c.test(t)&&!u.test(n)?"\\u"+t.charCodeAt(0).toString(16):t},m=a((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&n({target:"JSON",stat:!0,forced:m},{stringify:function(t,e,r){var n=s.apply(null,arguments);return"string"==typeof n?n.replace(o,d):n}})}}]);