import{o as s,c as d,w as e,a as t,e as v,t as a,Q as g,J as x,U as B,R as o,aa as S,Z as G,b as j,G as w,f as p,S as _,_ as L,M as P,as as z,i as E}from"./index-BAZgbal1.js";import{p as I}from"./parameters-DfOTof2l.js";import{V as b,a as A,c as V}from"./VCard-DNO-zK2P.js";import{V as Q}from"./VChip-CTOpyymj.js";import{V as J}from"./VDataTable-C0eQeH3V.js";import{V as Z}from"./VTextField-B1aixe0Y.js";import{h as $,i as H,q}from"./index-2vnC8Vie.js";import{a as m,V as c}from"./VRow-B9t19ukL.js";import{V as K,a as W}from"./VToolbar-7dK0ghH-.js";import"./tag-cARXM09U.js";import"./VAvatar-DuybK5Si.js";import"./dimensions-BvonjXC6.js";import"./VSelect-2dOoZxQo.js";import"./forwardRefs-CjMRaIA6.js";import"./ssrBoot-CWMlusa3.js";import"./VMenu-lrmWHp5u.js";import"./filter-G89ZZbTZ.js";/* empty css              */const X={class:"headline"},Y={__name:"AccountAliases",props:{account:{type:Object,default:null}},setup(l){return(n,r)=>(s(),d(V,null,{default:e(()=>[t(b,null,{default:e(()=>[v("span",X,a(n.$gettext("Aliases")),1)]),_:1}),t(A,null,{default:e(()=>[(s(!0),g(x,null,B(l.account.aliases,u=>(s(),d(Q,{key:u,class:"mr-2 mt-2"},{default:e(()=>[o(a(u),1)]),_:2},1024))),128))]),_:1})]),_:1}))}},C="senderaddresses",R={getAll(){return S.get(`${C}/`)},getAllForMailbox(l){return S.get(`${C}/`,{params:{mailbox:l}})},create(l){return S.post(`${C}/`,l)},delete(l){return S.delete(`${C}/${l}/`)}},ee={class:"headline"},te={key:0},ae={__name:"AccountSenderAddresses",props:{account:{type:Object,default:null}},setup(l){const n=G(),{$gettext:r}=j(),u=l,i=w([]),y=w(!1),f=w(""),T=[{title:r("Address"),key:"address"},{title:"",key:"actions",align:"end",sortable:!1}];function F(){i.value.push({}),y.value=!0}function N(){R.getAllForMailbox(u.account.mailbox.pk).then(h=>{i.value=h.data})}function O(){const h={address:f.value,mailbox:u.account.mailbox.pk};R.create(h).then(()=>{N(),f.value=null,y.value=!1,n.displayNotification({msg:r("Sender address added")})})}function U(h){R.delete(h.pk).then(()=>{N(),n.displayNotification({msg:r("Sender address deleted")})})}return N(),(h,D)=>(s(),d(V,null,{default:e(()=>[t(b,null,{default:e(()=>[v("span",ee,a(p(r)("Sender addresses")),1)]),_:1}),t(A,null,{default:e(()=>[t(J,{headers:T,items:i.value,"no-data-text":p(r)("No sender address defined for this account")},{"item.address":e(({item:k})=>[k.pk?(s(),g("span",te,a(k.address),1)):(s(),d(Z,{key:1,modelValue:f.value,"onUpdate:modelValue":D[0]||(D[0]=M=>f.value=M),label:p(r)("Specify an email address")},{append:e(()=>[f.value?(s(),d($,{key:0,icon:"mdi-content-save",color:"primary",variant:"text",onClick:O})):_("",!0)]),_:1},8,["modelValue","label"]))]),"item.actions":e(({item:k})=>[k.pk?(s(),d($,{key:0,icon:"mdi-delete-outline",color:"red",title:p(r)("Remove this address"),variant:"text",onClick:M=>U(k)},null,8,["title","onClick"])):_("",!0)]),bottom:e(()=>[]),_:2},1032,["items","no-data-text"]),y.value?_("",!0):(s(),d($,{key:0,size:"small",color:"primary",variant:"outlined",onClick:F},{default:e(()=>[t(H,{size:"small",icon:"mdi-plus"}),o(" "+a(p(r)("Add sender address")),1)]),_:1}))]),_:1})]),_:1}))}},le={class:"headline"},ne={__name:"AccountSummary",props:{account:{type:Object,default:null}},setup(l){return(n,r)=>(s(),d(V,null,{default:e(()=>[t(b,null,{default:e(()=>[v("span",le,a(n.$gettext("General information")),1)]),_:1}),t(A,null,{default:e(()=>[t(m,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[o(a(n.$gettext("Creation date")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[o(a(n.$date(l.account.date_joined)),1)]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[o(a(n.$gettext("Last login date")),1)]),_:1}),l.account.last_login?(s(),d(c,{key:0,cols:"6"},{default:e(()=>[o(a(n.$date(l.account.last_login)),1)]),_:1})):(s(),d(c,{key:1,cols:"6"},{default:e(()=>[o(a(n.$gettext("Never logged-in")),1)]),_:1}))]),_:1}),t(m,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[o(a(n.$gettext("Full name")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[o(a(l.account.first_name)+" "+a(l.account.last_name),1)]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[o(a(n.$gettext("Role")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[o(a(l.account.role),1)]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[o(a(n.$gettext("Secondary email")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[o(a(l.account.secondary_email),1)]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[o(a(n.$gettext("Phone number")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[o(a(l.account.phone_number),1)]),_:1})]),_:1}),l.account.mailbox?(s(),g(x,{key:0},[t(m,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[o(a(n.$gettext("Quota")),1)]),_:1}),l.account.mailbox.quota==="0"?(s(),d(c,{key:0,cols:"6"},{default:e(()=>[o(a(n.$gettext("Unlimited")),1)]),_:1})):(s(),d(c,{key:1,cols:"6"},{default:e(()=>[t(q,{color:l.account.mailbox.quota_usage<80?"primary":"warning",value:l.account.mailbox.quota_usage,height:"25",class:"white--text"},{default:e(({value:u})=>[o(a(Math.ceil(u))+"% ("+a(l.account.mailbox.quota)+" "+a(n.$gettext("MB"))+") ",1)]),_:1},8,["color","value"])]),_:1}))]),_:1}),l.account.mailbox.message_limit?(s(),d(m,{key:0},{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[o(a(n.$gettext("Daily sending limit")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[o(a(l.account.mailbox.message_limit),1)]),_:1})]),_:1})):_("",!0)],64)):_("",!0)]),_:1})]),_:1}))}},se={class:"headline"},oe={key:1},ue={class:"text-disabled"},ce={__name:"DomainAdminDomains",props:{account:{type:Object,default:null}},setup(l){const{$gettext:n}=j();return(r,u)=>(s(),d(V,null,{default:e(()=>[t(b,null,{default:e(()=>[v("span",se,a(p(n)("Administered domains")),1)]),_:1}),t(A,null,{default:e(()=>[l.account.domains!==void 0&&l.account.domains.length?(s(!0),g(x,{key:0},B(l.account.domains,i=>(s(),d(m,{key:i},{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[o(a(i),1)]),_:2},1024)]),_:2},1024))),128)):(s(),g("div",oe,a(p(n)("No domain managed")),1)),v("div",ue,a(p(n)("Add/Remove from the domain page")),1)]),_:1})]),_:1}))}},re={class:"headline"},de={__name:"ResourcesView",props:{resources:{type:Array,default:null}},setup(l){function n(r){return r<50?"primary":r<80?"warning":"error"}return(r,u)=>(s(),d(V,null,{default:e(()=>[t(b,null,{default:e(()=>[v("span",re,a(r.$gettext("Resources usage")),1)]),_:1}),t(A,null,{default:e(()=>[(s(!0),g(x,null,B(l.resources,i=>(s(),g("div",{key:i.name,class:"mt-4"},[o(a(i.label)+" ("+a(Math.ceil(i.usage))+"%) ",1),t(q,{value:i.usage,color:n(i.usage)},null,8,["value","color"])]))),128))]),_:1})]),_:1}))}},ie={__name:"AccountView",setup(l){const n=P(),r=z(),u=E(()=>r.accounts[n.params.id]!==void 0?r.accounts[n.params.id]:(y(),{pk:n.params.id})),i=w({});I.getApplication("limits").then(f=>{i.value=f.data});function y(){r.getAccount(n.params.id)}return(f,T)=>(s(),g(x,null,[t(K,{flat:""},{default:e(()=>[t(W,null,{default:e(()=>[o(a(f.$gettext("Account"))+" "+a(u.value.username)+" ",1),t($,{color:"primary",icon:"mdi-circle-edit-outline",to:{name:"AccountEdit",params:{id:u.value.pk}}},null,8,["to"]),t($,{color:"primary",icon:"mdi-reload",onClick:y})]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[t(ne,{account:u.value},null,8,["account"]),u.value.role==="DomainAdmins"?(s(),d(ce,{key:0,class:"mt-2",account:u.value},null,8,["account"])):_("",!0)]),_:1}),t(c,{cols:"6"},{default:e(()=>[i.value.params&&i.value.params.enable_admin_limits&&u.value.role!=="SimpleUsers"&&u.value.role!=="SuperAdmins"?(s(),d(de,{key:0,resources:u.value.resources},null,8,["resources"])):_("",!0),u.value.aliases?(s(),d(Y,{key:1,class:"mt-2",account:u.value},null,8,["account"])):_("",!0),u.value.mailbox?(s(),d(ae,{key:2,class:"mt-2",account:u.value},null,8,["account"])):_("",!0)]),_:1})]),_:1})],64))}},Re=L(ie,[["__scopeId","data-v-74e7762e"]]);export{Re as default};
