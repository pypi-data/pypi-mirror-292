import{b as C,ad as D,at as G,M,N as j,G as d,d as z,f as i,o as s,c as m,Q as _,a,w as e,R as r,t as n,e as E,J as S,U as J,_ as O}from"./index-BAZgbal1.js";import{_ as Q,a as q}from"./AliasRecipientForm-DjagAQHc.js";import{L as H}from"./LoadingData-BC4LJs1L.js";import{w,i as b,h as A}from"./index-2vnC8Vie.js";import{V as R,c as T,a as $,b as K}from"./VExpansionPanels-Y3_rJpHb.js";import{a as g,V as p}from"./VRow-B9t19ukL.js";import{V as W}from"./VChip-CTOpyymj.js";import{V as X,a as Y}from"./VToolbar-7dK0ghH-.js";import"./EmailField-tY9cX0RH.js";import"./VTextField-B1aixe0Y.js";import"./tag-cARXM09U.js";import"./forwardRefs-CjMRaIA6.js";import"./ssrBoot-CWMlusa3.js";import"./dimensions-BvonjXC6.js";import"./VAvatar-DuybK5Si.js";import"./VForm-CMLbYr8a.js";import"./VSwitch-gbuBfPzI.js";import"./VSelect-2dOoZxQo.js";import"./VMenu-lrmWHp5u.js";import"./VTextarea-CfQINbzW.js";import"./VContainer-CpoaXVwO.js";/* empty css              */const Z={key:1},ee={key:0},ae={class:"mr-2"},te={key:0},le={class:"mt-4 d-flex justify-end"},se={__name:"AliasEditForm",setup(B){const{$gettext:u}=C(),k=D(),y=G(),x=M(),N=j(),o=d({pk:x.params.id}),v=d(0),f=d(!1),V=d(!1),F=d(),h=d(),I={generalForm:F,recipientForm:h};async function L(){V.value=!1,v.value=[];for(const[c,l]of Object.entries(I))if(l.value!=null){const{valid:t}=await l.value.vFormRef.validate();t||(V.value=!0,v.value.push(c))}V.value||(f.value=!0,k.updateIdentity("alias",o.value).then(()=>N.push({name:"AliasDetail",params:{id:x.params.id}})).finally(()=>f.value=!1))}return z(()=>{y.getAlias(x.params.id).then(c=>{o.value={...c.data}})}),(c,l)=>!i(y).aliasesLoaded||f.value?(s(),m(H,{key:0})):(s(),_("div",Z,[a(K,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=t=>v.value=t),multiple:V.value},{default:e(()=>[a(R,{eager:"",value:"generalForm"},{default:e(()=>[a(T,null,{default:e(({expanded:t})=>[a(g,{"no-gutters":""},{default:e(()=>[a(p,{cols:"4"},{default:e(()=>[r(n(i(u)("General")),1)]),_:1}),a(p,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(w,{"leave-absolute":""},{default:e(()=>[t?(s(),_("span",ee)):(s(),m(g,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[a(p,{cols:"6"},{default:e(()=>[r(n(i(u)("Address"))+": "+n(o.value.address),1)]),_:1}),a(p,{cols:"6"},{default:e(()=>[E("div",ae,n(i(u)("Enabled")),1),o.value.enabled?(s(),m(b,{key:0,color:"success"},{default:e(()=>[r("mdi-check-circle-outline")]),_:1})):(s(),m(b,{key:1},{default:e(()=>[r("mdi-close-circle-outline")]),_:1}))]),_:1})]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a($,null,{default:e(()=>[a(Q,{ref_key:"generalForm",ref:F,modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t)},null,8,["modelValue"])]),_:1})]),_:1}),a(R,{eager:"",value:"recipientForm"},{default:e(()=>[a(T,null,{default:e(({expanded:t})=>[a(g,{"no-gutters":""},{default:e(()=>[a(p,{cols:"4"},{default:e(()=>[r(n(i(u)("Recipients")),1)]),_:1}),a(p,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(w,{"leave-absolute":""},{default:e(()=>[t?(s(),_("span",te)):(s(),m(g,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[(s(!0),_(S,null,J(o.value.recipients,(P,U)=>(s(),m(W,{key:U,size:"small"},{default:e(()=>[r(n(P),1)]),_:2},1024))),128))]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a($,null,{default:e(()=>[a(i(q),{ref_key:"recipientForm",ref:h,modelValue:o.value.recipients,"onUpdate:modelValue":l[1]||(l[1]=t=>o.value.recipients=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","multiple"]),E("div",le,[a(A,{loading:f.value,onClick:l[3]||(l[3]=t=>c.$router.go(-1))},{default:e(()=>[r(n(i(u)("Cancel")),1)]),_:1},8,["loading"]),a(A,{class:"ml-4",color:"primary darken-1",loading:f.value,onClick:L},{default:e(()=>[r(n(i(u)("Save")),1)]),_:1},8,["loading"])])]))}},oe={__name:"AliasEditView",setup(B){const{$gettext:u}=C();return(k,y)=>(s(),_(S,null,[a(X,{flat:""},{default:e(()=>[a(Y,null,{default:e(()=>[r(n(i(u)("Edit alias")),1)]),_:1})]),_:1}),a(se,{alias:k.alias},null,8,["alias"])],64))}},Re=O(oe,[["__scopeId","data-v-21c8ea90"]]);export{Re as default};
